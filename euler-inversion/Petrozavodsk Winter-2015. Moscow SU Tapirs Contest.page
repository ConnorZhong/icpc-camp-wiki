### A Aho[fsf]
跑 KMP ，容易发现答案不增加的话就不用急着做。记个i,j作为状态每次进去做几步就行了。

### K Kolmogorov[fsf]

令 $E[v]$ 表示点 $v$ 到终点的期望步数。

假设在点 $v$ 时的决策是如果 $(v,v_i) (1\leq i\leq k)$ 当前可用的话就跑去 $v_i$ ，那么 $E[v]=(E[v_1]+E[v_2]+\ldots E[v_k])/k + m/k$ 。

应该只要满足 $E[u]<E[v]$ 那么在点 $v$ 的时候就会选择去点 $u$ （如果边 $(u,v)$ 当前可用的话）

于是跑个 dijkstra 算 $E[v]$ 就行了。