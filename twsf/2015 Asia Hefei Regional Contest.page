[A. Bus Routes](http://acm.hdu.edu.cn/showproblem.php?pid=5552) \[zxa\]
=======================================================================

至少有一个环的方案只需用联通图的方案减去树的方案就行了，树的方案显然是$n^{n-2}m^{n-1}$，所以只需要求联通图的方案。

设$f_i$为i个点联通的方案，$g_i$为i个点不联通的方案，$h_i$为无所谓的方案，显然$f_i+g_i=h_i=(m+1)^{\frac{i(i-1)}{2}}$。

则有递推式$g_i=\sum_{j=1}^{i-1}\binom{i-1}{j-1}f_j h_{i-j}$。

利用分治+FFT求解即可。

[B. Advanced Calculator](http://acm.hdu.edu.cn/showproblem.php?pid=5553)
========================================================================

[C. Autopilot System](http://acm.hdu.edu.cn/showproblem.php?pid=5554) \[zxa\]
=============================================================================

先列出暴力列出方程，设$P_x$为从x点出发到达$n$号点的期望，$X=\sum{P_{u_i} \cdot q_i}$，可以发现每个方程后面都跟着一坨$X$。

以$n$为根dfs，设点$x$的父亲为$f$，则可以递推出每个点$P_x=A \cdot P_f + B \cdot X + C$中的$A,B,C$，然后因为$P_n$为0，即可再递推出每个$P_x$与$X$的关系。

这个时候就可以用$m$个关键点与$X$的关系解出$X$，就可以知道$P_1$了。

[D. Immortality of Frog](http://acm.hdu.edu.cn/showproblem.php?pid=5555) \[zxa\]
================================================================================

压压覆盖每列的是哪些行，然后可以直接暴力状压dp，压的是有哪些行还没有用过，因为题目强行给出的条件每个列只会被不超过10行覆盖，超过10行则不合法。

[E. Land of Farms](http://acm.hdu.edu.cn/showproblem.php?pid=5556) \[zxa\]
==========================================================================

普通做法是枚举老农场选或不选然后二分图最大独立集，事实上冲一发最大团也能通过这个题目。

[F. Matching Compressed String](http://acm.hdu.edu.cn/showproblem.php?pid=5557) \[zxa\]
=======================================================================================

维护每个状态为起点时转移到的状态，中间有重复的过程可以直接倍增。

[G. Alice's Classified Message](http://acm.hdu.edu.cn/showproblem.php?pid=5558) \[zxa\]
=======================================================================================

后缀数组模拟

[H. Frog and String](http://acm.hdu.edu.cn/showproblem.php?pid=5559) \[zxa\]
============================================================================

K=1时显然只能构造n=m的情况

K&gt;2时可以用aaa..aabcabc..abc构造m范围为\[3,n\]的情况

K=2时特判一下n=8以及m=7的情况，然后用abbaba的循环可以构造出m范围为\[8,n\]的情况。

[I. The Shields](http://acm.hdu.edu.cn/showproblem.php?pid=5560) \[zxa\]
========================================================================

两半分开统计，发现是一个三维区间询问的问题，离线后用树状数组套Treap统计即可。注意坐标范围是±1e9，以及没有空隙的情况。

[J. Kingdom of Tree](http://acm.hdu.edu.cn/showproblem.php?pid=5561) \[zxa\]
============================================================================

首先二分答案$Value$，问题转化为判定$\min\{\sum{R} - Value \cdot \sum{L}\}$是否小于$0$。

然后最暴力的方法是枚举满足$R_x+R_y \leq L_{xy}$的$L$的集合，再求出这个集合对应的最小的\$\sum{R}。这个问题是二分图带权最大匹配的对偶问题，最小值为最大权匹配，而又因为是树，可以用dp求出最大匹配。

设$f[x][0]$是以$x$为根的子树内部的最大权值匹配，根必须不选，$f[x][1]$无所谓根选不选，则有以下方程。

$$
f[x][0] = \sum_y{f[y][1]} \\
f[x][1] = f[x][0] + \max_y\{f[y][0] - f[y][1] + w(x , y)\}
$$

然而这样check是$O(n2^n)$的，所以需要一些脑洞，如果我们以这棵树的重心为根，这样挖去重心后每个联通块的大小不超过$15$，这样就可以暴力枚举出每个子树每个状态的$f$值，然后考虑合并。

如果不选根答案很好统计，如果要选根可以观察上面的方程，把子树内所有状态按$f[y][0] - f[y][1] + w(x , y)$排序，去枚举这个最大值，这时候就可以维护一下每个子树的$f[y][1]-Value \cdot Cost$的最小值，就可以得到最小的$\sum{R} - Value \cdot \sum{L}$了。
