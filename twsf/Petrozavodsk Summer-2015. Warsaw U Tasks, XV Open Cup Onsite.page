A. Sorcerers of the Round Table \[zxa\]\[jsy\]
==============================================

$p \leq 2$的情况都是简单的，难的是$p=3$的情况。

设$f[x]$为长度为$x$且头是$x$尾是$x-1$的方案数，$g[x]$为长度为$x$且头是$x-1$尾是$x$的方案数。

$x$小的$f,g$可以通过枚举得到，通过一些爆搜可以得到$g \rightarrow f$,$f \rightarrow g$的转移。

-   0 2 | 1
-   0 3 | 2 1
-   0 3 2 5 | 4 1
-   0 3 6 | 5 2 4 1

最后再通过一样的爆搜枚举$n$号点周围的点即可得到答案。

-   0 | 1 0
-   0 1 | 0
-   0 2 1 4 | 3 0
-   0 2 5 | 4 1 3 0
-   0 3 | 4 1 2 0
-   0 3 1 4 | 5 2 0

B. Movie-goer \[zxa\]\[jsy\]
============================

枚举左端点，对于每种电影第一次出现的权值是正的，第二次是负的之后都是0，用线段树维护维护就好了。

C. Speed Reading Course \[zxa\]\[jsy\]
======================================

设匹配的第一个位置是$x$，则对于模板串每个位置$i$都要满足$a(x+i)+b \mod n$在一个区间内，即$ax$在一个区间内。求出所有$i$对应的区间的交后，再把$x>n-m$的情况减去，由$a$与$n$互质所以每一个$ax$就对应一个$x$。

D. Squares \[zxa\]
==================

找规律，仅仅写了代码 =\_\_\_\_=

E. Gluttons \[zxa\]
===================

顺时针逆时针暴力迭代几圈，换手更优就换。

F. Highway Modernization \[jsy\]
================================

枚举断掉一条边，维护两个子树的直径。最短的答案是把两个直径的中点接起来，最长的答案是两个直径各选一个端点接起来。中点用倍增的方法求。

G. Car Washes \[jsy\]
=====================

用$f[t][l][r]$代表区间$[l,r]$内只能填权值不小于$t$所能获得的最大代价，转移的话就枚举一个格子$x$填$t$。跨越$x$的区间就只能选$x$，然后就变成两个区间的子问题了。复杂度$O(n^3 * m)$，但是要除一个大常数。

H. Visits \[jsy\]
=================

分情况，对于$c$大于$\sqrt{n}$的询问，直接暴力。小于$\sqrt{n}$的询问，暴力预处理表。

I. Seal \[jsy\]
===============

模拟，注意去掉四周为空的格子。

J. Desert \[zxa\]\[jsy\]
========================

并查集合并权值相同的点，然后老方法建图。然后在DAG上DP出每个数的上下界。

K. Direction Signs \[jsy\]
==========================

对于一个固定的参照城市，城市集合有固定的进位顺序。随机一个参照城市，对于每个城市都能计算出进位的集合，现在要选出尽量多的城市，使得城市的进位集合是互相包含的。由于有至少$20%$的概率选到答案所包含的城市，所以就随机$30$次就能保证出错的概率很低了。
