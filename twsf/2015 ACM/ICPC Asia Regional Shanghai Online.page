> 这锅我分了！

[Source](http://acm.hdu.edu.cn/search.php?field=problem&key=2015+ACM%2FICPC+Asia+Regional+Shanghai+Online&source=1&searchmode=source)

A.Puzzled Elena [zxa](#jsy) {#a.puzzled-elena-zxa-jsy}
===========================

$\sum_i{[gcd(a_i, x)=1]}=\sum_{d|x}{(\mu_d \times \sum_{d|i}{1})}$，然后离线统计统计。

B.Antonidas [jsy](#zxa) {#b.antonidas-jsy-zxa}
=======================

树分治，枚举每个分治中心，从中心出发往子树走，找到所有合法的前缀后缀，然后更新答案即可。

PS: 这题我的锅

C.Typewriter [jsy](#zxa) {#c.typewriter-jsyzxa}
========================

$f[i]$代表打出前$i$个字符最小的代价，$O(n^2)$的做法很简单。

对于打一个单独的字符，转移很简单。

打一段连续的字符，如果 $S[i..j]$是
$S[1..i-1]$的子串，则可以从$f[i - 1]$转移到$f[j]$。设$r[i]$为最大的$j$使得$S[i..j]$是$S[1..i-1]$的子串，这个可以利用后缀自动机得到，很显然$r[i]$是单调不降的。然后$f[i]$
可以转移到$f[j] (i + 1 \le j \le r[i+1])$，根据$dp$方程$f[j] = max(f[i] + (j - i) \cdot A + 2B)$可以知道这个东西可以用单调队列来做的。

用后缀自动机处理$r[i]$的的大概方法是能走使劲走，后缀自动机每次加字符时都意味着匹配串的头要删掉一个字符，如果这时对应状态的长度区间不包含这个串了就让它沿着$f$指针跳到满足即可。

D.Count the Grid [jsy](#zxa) {#d.count-the-grid-jsy-zxa}
============================

$dp$，离散化后矩阵变成$20 \times 20$的，$dp[i][j][mask]$代表处理到第$(i,j)$个格子了，有$mask$状态的矩阵满足给定条件的方案数。

zxa:转移就枚举一下当前这堆数的最大值所在的区间，我的dp写的过于暴力，加了一个小剪枝才过。

E.Code Formatting
=================

给所有不在双引号里面的符号两边加上空格，然后拿stringsteam处理，然后进行文法分析

F.There was a kingdom [jsy](#zxa) {#f.there-was-a-kingdom-jsyzxa}
=================================

首先肯定选择凸包上的点，设
$dp[i][j][k]$代表选了$k$个点，起点是$i$，终点是$j$的最大面积是多少。这个复杂度看上去是$O(n^4)$的，但是除了一个很大的常数。

G.A simple graph problem [jsy](#zxa) {#g.a-simple-graph-problem-jsy-zxa}
====================================

考虑不是割点的节点个数的期望，首先叶子节点肯定不是割点，对答案的贡献为$n \cdot (n-1) ^ n$。然后就是环上的节点有可能不是割点，考虑两种情况。

-   一元环，该节点下面最多挂一棵外向树，方案为$n \cdot ((n-1)^{n-1} + (n - 1) \cdot (n - 1)^{n-2})$。

-   $K$($K > 1$)元环，该节点下面不能挂外向树，方案为$\binom{n}{K} \cdot (K - 1)! \cdot (n-1)^{n-K} \cdot K$

H.An easy problem [jsy](#zxa) {#h.an-easy-problem-jsyzxa}
=============================

签到题，由于只会除之前出现过的数字，所以只需要用线段树保存哪些数字还存在以及他们的积就可以了。

I.Explore Track of Point [zxa](#zxa)
====================================

瞎蒙-&gt;[详细](http://talk.icpc-camp.org/d/77-2015-i-explore-track-of-point)

J.A Sweet Journey [zxa](#zxa)
=============================

水题

K.Can you find it [zxa](#zxa)
=============================

$a^{k_1 \cdot n + b_1} + b^{k_2 \cdot n - k_2 + 1} \equiv 0 \mod C$

设$P=a^{b_1} , Q = b^{-k_2+1} , A = a^{k_1} , B = b^{k_2}$，则等价于$P \cdot A^n + Q \cdot B^n \equiv 0 \mod C$

再等价于$P + Q \equiv 0 \mod C, A \equiv B \mod C$，枚举$A$，判断$P+Q$即可。

总结
====

jsy
---

今天刚开始因为$04$的$SB$错误卡了我不少时间。接下来开始坑$02$，刚开始想了个$O(n\log^2n)$的做法，然后和队友稍微交流了一下，他想的是一个$\log$的做法，交流时我一直以为他想的也是两个$\log$的做法，而且数据范围是$10^4$，于是我以为稳了。结果写了好长时间，交上去$TLE$。后来改成一个$\log$以及加了点常数优化才卡过去的。这场最大的问题就是交流不到位。

zhy
---

这场需要注意的问题还是队友间相互影响太大。要是一直专注在题目上面最后一题应该是可以出的。而且比赛中总是想着要血崩。。还是对发挥有影响的。

zxa
---

忘了自己还没有总结……这次开局看起来还是比较正常的，没有在两个大水题前面卡住，但是接下来还是出现了一些问题，一个是K题没有想清楚就去写，写的时候也没有抓住问题本质绕了一个圈子WA了T了不少次才通过，这个现象对前期的发展是致命的。再者无论是B题和D题上自己都是有了一点着急，没有把时间用在好好思考别的题上，尽量不能被队友出了状况所干扰。

最后uestc的题看起来还不错，应该算是5场网络赛里面质量比较好的了，当然如果没那个模拟更好。
