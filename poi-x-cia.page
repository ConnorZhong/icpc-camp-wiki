# POI X Stage I -- Sequences without Stammers(cia) Solution

定义1
:    序列$S$是好的，当且仅当不存在$i > 0, j \geq 0$满足，对于任意$0 \leq k < j$, 有$S_{i + k} = S_{i + j + k}$。

定义2
:    序列$S$是强的，当且当且仅当不存在$i > 0, j \geq 0$满足，对于任意$0 \leq k \leq j$, 有$S_{i + k} = S_{i + j + k}$。

定义3
:    Thuego-Morsa序列，$S_n = a$当且仅当$n$的二进制表示中有偶数个$1$。

定理4
:    $S_{2n} = S_n$。

定理5
:    $S_{2n + 1} = -S_n$。

定理6
:    $S_j = S_{j + 1} \Rightarrow j$是奇数。

定理7
:    不存在满足$S_j = S_{j + 1} = S_{j + 2}$的$j$。

定理8
:    任意连续$5$个元素，必有连续$2$个相同元素。
证明
:    否则必然是ababa的形式（或者babab），即$S_k = S_{k + 2} = S_{k + 4} \Rightarrow S_{k / 2} = S_{k / 2 + 1} = S_{k / 2 + 2}$。矛盾。

定理9
:    Morsa序列是强的。
证明
:    - 若$j = 1$，则有$S_i = S_{i + 1} = S_{i + 2}$，矛盾。
:    - 若$j$是奇数，则$j \geq 3$。从而$[i, i + 2j]$的长度至少为$7$。由定理8，知道其中有连续$2$个相同元素。因为$j$是奇数，由于复制的关系，所以其中必然有一对是从奇数下标开始的，由定理6得矛盾。
:    - 若$j$是偶数，则考虑其中奇数位或者偶数位的相等关系，可以把$j$除以$2$，化为上述情况。

定义10
:    考虑相邻两项$(S_i, S_{i + 1})$, 把$(a, a), (a, b), (b, a), (b, b)$映射为$1, 2, 3, 4$，得到$4$个字符的好串。

定理11
:    对于$1$和$4$，只会有$312$和$243$两种模式。

定理12
:    把$1$和$4$换成$5$后的串是好的。
证明
:    没有形如$55$的串，因为置换前是$11$, $14$, $41$, $44$都不可能。如果长度大于$1$，那么根据$5$前面（后面）是$2$还是$3$就可以唯一确定原来是$1$还是$4$，因为原来是好的，所以置换后也是好的。