# Open Cup XVI Grand Prix of Asia G Paint

一条长度为$n$的白纸带，被分为了$n$个格子。

现在有$k$次操作，第$i$次需要选中连续$a_i$个格子涂黑。

问最后能得到多少种纸带,答案模1e9+7。

$n\leq 10^9,K\leq 4$

我想的是。。
K这么小，肯定是想让人从这个角度暴力。

显然最后最多只有4段连续的黑格子。

我们只需要关心这四段的长度，然后算不相交地搁放这4段方案数就行了。

然后接下来就不太会做了。

然后看std大概是某种容斥。。讲题视频又是毛子语，听不太懂。。


[mikantsumiki wrote on 2016-09-04T08:00:27]

---

先搜，把这些 $a_i$ 分组，那么每组都有一个最小、最大的长度。

接着，这些分组之间并不是独立的。举个例子说，如果分成四组，那么每个方案可以看做是个四维的超立方体，这些超立方体可能会有交。但是无所谓，可以暴力离散化一下，把四维空间切成一些小立方体，我们对于每个小立方体单独算，这样就不会重复了。

最后到达的一个问题是，你可以放 $\leq 4$ 段，每段有个上界有个下界，那么等价于解问方程

$x_1 + y_1 + x_2 + y_2 + x_3 + y_3 + x_4 + y_4 + x_5 = n$ 的解数。

其中 $x_{1, 5} \geq 0, x_{2, 3, 4} \geq 1$，$y_1, y_2, y_3, y_4$ 有个上下界的限制，这个就是经典的容斥，把上界去掉，就剩下组合数了。

---

p.s. 这是当时我的做法。。亲测可以 AC。

[ftiasch wrote on 2016-09-04T08:50:30]

---

