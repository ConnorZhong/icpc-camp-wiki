# 2016 香港网赛 I 题

题意大概就是给定一个字符串，若干个询问，每个询问是求某个区间的子串中回文串的个数。
字符串长度和询问都是 10^5 级别的
题目有种很经典的感觉，但是没啥头绪。。
不过好多人过了，所以想在这里请教一下大家。

[mstczuo wrote on 2016-09-10T13:31:53]

---

一个做法与 [这个题](https://nanti.jisuanke.com/t/441) 一致，可以参考 [题解](http://blog.jisuanke.com/?p=56)。

[sd_invol wrote on 2016-09-10T13:44:38]

---

答案分为三部分，一部分是完全包在询问里面的，另外就是回文中心在右侧和左侧的。
后面两者是对称的，我们只考虑回文中心在左侧的。

假设询问是 [l, r]，那么回文中心 $c$ 需要满足 $l \leq c \leq \frac{l + r}{2}$，同时 $c - \mathrm{palin}(c) \leq l$.
贡献大概是 $c - l$.
那么只要对着 $l$ 离线，在合适的时刻把 $c$ 插入到树状数组里面就好了。

[ftiasch wrote on 2016-09-10T13:47:12]

---

