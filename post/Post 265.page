# Samara 2015 G Short Path

[Problem Link](http://codeforces.com/gym/100812/problem/G)

给一个$n(2\leq n \leq 100000)$个顶点$m(1\leq m \leq 100000)$条边的无向图，每个点有一个$0/1$标记，找一个两点标记均为$1$的点对使得这两点之间的距离是所有这样的点对中最短的，输出距离和方案，有多组方案可以输出任意一组，无解输出"No luck at all"（不含引号）。

[思考熊]这题要怎么捉呢……

[quailty wrote on 2015-11-14T13:50:00]

---

大家往外 BFS，枚举一条边，把两个块块接起来就好啦？

[ftiasch wrote on 2015-11-14T13:55:40]

---

提供另一种奇怪的思路。。复杂度比叉姐的要高一个log

把所有的1点排好，重新编号为特殊点1，特殊点2，特殊点x...

枚举二进制位，每次计算所有第i位是0的特殊点和所有第i位是1的特殊点之间的最短距离

[splinter wrote on 2015-11-14T14:09:25]

---

@splinter#2587 嗯我知道你这个。。其实这个想法还是挺厉害的。

[ftiasch wrote on 2015-11-14T14:13:30]

---

@Varona#2586 @splinter#2587 
大概明白了，多谢指教（以及二进制分解这个idea真是相当酷炫

[quailty wrote on 2015-11-14T14:23:36]

---

@Varona#2586 可以稍微详细讲一下这个做法吗？

[mektpoy wrote on 2015-12-21T01:29:14]

---

@mektpoy#3038 哪个啊？

[ftiasch wrote on 2015-12-21T05:58:47]

---

@Varona#3040 抱歉产生了点歧义 二进制的做法我已经理解了 我想问的是这个 “大家往外 BFS，枚举一条边，把两个块块接起来就好啦？”

[mektpoy wrote on 2015-12-21T06:00:07]

---

@mektpoy#3041 这里「块」的定义是一个点 v 会属于距离它最近的被标记的点，可以看做是某种 Voronoi diagram。

然后我们可以证明一下，从 A 出发的话，一定是到某一个相邻的块。所以就枚举怎么过去就可以了。

[ftiasch wrote on 2015-12-21T13:46:31]

---

