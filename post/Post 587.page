# PKU Campus selection 题解

**以下是 ICPCCamp 团队所写的非官方题解**，感谢大家的帮助和支持。欢迎大家回帖交流。

感谢 @NPC @ftiasch @rowdark @zimpha @edly @Sd_Invol 在过程中的帮助。

---

## A. Escape

题意: 有个$X \times Y$的地图, 从$(0,0)$出发, 一开始朝上. 每次只能往前走或者右转, 要求不能经过重复点, 问到达点$(x,y)$的方案数.

题解: $dp(n, m)$ 表示方案数，枚举一下当前向上多少格，转一下坐标就可以了。

## B. Paint Me Less

题意：4 * 4 的矩阵，每次可以把一个四连通块染色，问全部染成 0 需要多少次。

题解：可以发现总步数是$rc$差不多的, 直接迭代加深搜索就好了?

## C. Shadow Area

题意: 有$n$栋建筑, 形状是长方体. 告诉这些建筑的高度, 以及底边长方形的坐标. 问在阳光照射下地面产生的阴影面积之和.

题解: 每栋建筑在地面上的阴影是个凸包. 然后就是求出这$n$个凸包, 求个面积并就好了. 注意还要减去建筑物底面长方形本身的面积, 这部分不算是阴影.

AC[代码](https://gist.github.com/zimpha/0807280f837a30f301b966df6702784b), 仅供参考.

## D. Blocks

题意：$n$ 个元素 RBGY 四染色，要求 RG 各有偶数个，问方案数 mod 10007.

题解：矩阵乘法。

## E. Training little cats

题意：重复 10^9 次 k 个操作，每个操作是以下三种：
让 $x_i + 1$
让 $x_i = 0$
交换 $x_i, x_j$

题解：矩阵乘法 x2。

## F. Snipe the Sniper

题意: 在直角坐标系中, Sniper一开始在$(0,0)$位置, 要到$(100,0)$去, 速度$1$单位距离/秒, 初始血量为$HP$. 有$n$个敌人, 速度和Sniper一样. 一开始坐标在$(x_i,y_i)$, 每个人只能攻击一次, 攻击距离是$r_i$, 会使Sniper停止$s_i$秒, 并造成$d_i$点伤害. 问Sniper能否成功到达终点.

题解: 令$T$是Sniper到达终点需要的时间, $t_i$是敌人到达终点需要的时间减去$r_i$. 那么如果$t_i \le T$, 显然可以打到Sniper. 被打到后Sniper的时间会增加$s_i$. 于是每次找一个能打到Sniper, 并且增加$s_i$最多的打一下就好了.

## G. UmBasketella

题意：固定圆锥体表面积求最大体积

题解：魔幻三分

## H. Card Game

题意：n行第i行有i个取值为1~13的数字，初始时只有第n行的n个数字是暴露的，当(i+1,j)和(i+1,j+1)都被删除时(i,j)的数字才会暴露。初始时有一个基数X，每次操作可删除值与基数X相邻（即为X-1或X+1）且暴露的数，特别的是1和13是相邻的，若删除的数是Y，则基数替换成Y。另外有m次机会可以在任意时间将基数替换为1~13内的一个随机数，游戏结束当且仅当数都消完或者不能操作且m次机会都用完。删除一个数得P分，使用一次机会扣Q分，给定初始状态问最大期望能得多少分。

题解：n很小，直接把暴露的轮廓，剩余机会次数，当前基数都压状态直接DP即可。

## I. Special Squares

题意：有一些平行于坐标轴的直线以及一些点，选择两条横线和两条竖线有时会形成一个正方形并且包含至少一个点（在边上也算），统计这样的正方形个数

题解：首先这题数据范围有错，得开个 1111 才能过吧...

把所有交点抠出来，预处理一个二维前缀和，用来快速计算一个矩形内部有没有点。然后考虑在同一条主对角线的点，任意两个点都可以构成一个正方形。所以枚举一条主对角线，再枚举线上左下角的点，用双指针维护最小的包含点的右上角位置，这样可以做到 $O(n^2)$。

当然数据水咯，$O(n^3)$ 也是能随意过的。

## J. Full Steiner Topologies

题意: 一个点集$P=\{p_1,p_2,...,p_n\}$的full Steiner topology是一棵树$T=(V,E)$其中$V=\{v_1,v_2,...,v_{2n-2}\}$. $n$个可区分的叶子$v_1,v_2,...,v_n$对应$p_1,p_2,...,p_n$, 剩下$n-2$个节点叫做Steiner vertices, 是互相不可区分的, 并且这些点的度数都是$3$. 问$P$的本质不同的full Steiner topology有多少个.

题解: 令$a(n)=(2n-1)!!=\prod_{i=1}^{n} (2i-1)=\frac{(2n)!}{n!2^n}$, 那么答案是$a(n-2)$. 令$x=\log_{10} a(n-2)$, 那么$e=\lfloor x \rfloor$, $m=10^{x-e}$. 当$n$比较小的时候, 可以直接暴力求出$x$; 当$n$比较大的时候, 考虑用[Stirling公式](https://en.wikipedia.org/wiki/Stirling%27s_approximation)逼近$$ n!\sim {\sqrt {2\pi n}}\left({\frac {n}{e}}\right)^{n}$$.

## K. Polygon Division

题意: 给出一个正$n$多边形, 把它剖分成三角形或者四边形, 问有多少种方式.

题解: 令$f(n)$表示$n$边形的答案, 把点按照顺时针标号为$1,2,...,n$, 显然每条边必然属于一个三角形或者一个四边形. 仅考虑$1-n$这条边, 如果是三角形, 枚举另一个顶点即可; 如果是四边形, 则枚举另一条边. 综合一下可以得到转移方程为$f(n)=\sum\limits_{i=2}^{n-1}f(i)f(n-i+1)+\sum\limits_{i=2}^{n-2}\sum\limits_{j=i+1}^{n-1}f(i)f(n-j+1)f(j-i+1)$. 直接转移是$O(n^3)$的, 考虑令$g(n)=\sum\limits_{i=2}^{n-1}f(i)f(n-i+1)$, 那么$f(n)=g(n)+\sum\limits_{i=2}^{n-2}f(i)g(n-i+1)$, 这样就是$O(n^2)$的了.

## L. Pumping Lemma

题意：给出 DFA，求串 xyz 满足 $\forall k \geq 0, x + y^k + z \in \mathrm{DFA}$.

题解：在 DFA 里面找个环，之后起点走到环上，沿着环绕绕绕，再走到终点就行。

## M. Subimage Recognition

题意：给两个 01 矩阵 $A, B$, 问能不能删掉一些 $A$ 的行列使得 $A$ 和 $B$ 相同。

题解：$2^R$ 枚举删掉哪些行，列只要贪心 check 就行。


[zimpha wrote on 2016-10-07T09:10:39]

---

请问J题是怎么得到这个公式的

[hiaatcnd wrote on 2016-10-07T15:49:02]

---

