# Open Cup XVI Grand Prix of Siberia 12 Cypher

化简一下，题意大概是给出$a,b,y$，以及$M$十进制无前导$0$表示的一些数位上的数字，对于所有满足$0\leq x<M,0\leq y<M$，$ax+b\equiv y(mod\;M)$的二元组$(x,M)$，求$x$之和模$(10^9+7)$。
$1\leq a\leq 2^{15}, 0\leq b\leq 2^{14},0\leq y< 10^{15}$，$M$最大为$15$位十进制数。

[skywalkert wrote on 2016-07-08T10:36:38]

---

大概是这样，先引入变量$k$，把条件变为$ax+b-y-kM=0$，然后我们可以将其变为

$x=\frac{kM+y-b}{a}$

然后我们会发现当$b<M$时，$x$若要是非负整数，只要保证整除性即可；然后容易发现的是，对于模$a$相同的$M$，满足条件的$k$一定是呈等差数列关系的，再加上条件$0 \leq x < M$，这部分瞎算算就能算出来（应该写个数位DP即可）。

然后对于$b \geq M$的情况，容易发现暴力枚举$M$，利用扩展欧几里得就可以轻松的算出合法的$k$的数量；将两部分拼接后，就可以得到答案了。

[rowdark wrote on 2016-07-09T17:23:49]

---

