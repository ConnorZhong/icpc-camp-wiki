# HDU 5946

链接：http://acm.hdu.edu.cn/showproblem.php?pid=5946
给定一棵有 $n$ 个节点且以 $1$ 号节点为根的树，每个点 $x$ 有黑白两种颜色之一和一个权值 $A_x$。
定义对于点 $X$ 的操作为将点 $X$ 子树内与 $X$ 距离不超过 $A_x$ 的所有点反色。
现在等概率的对树上的节点进行操作，求将整棵树变黑的期望次数。

bc上的题解写的是
设 $f_x$ 表示还有 $n-x$ 个正确的点没有翻需要的期望步数。注意到翻到一个错误的点后，必须要再翻一次这个点才能挽回。于是我们可以列出一个方程。
$f_0=f_1+1$
$f_i=\frac{i}{n}f_{i-1}+\frac{n-i}{n}f_{i+1}+1$
$f_n=0$

---------------------------------------------------------------------------------------------
为什么不是
$f_0=\frac{1}{n}f_1+1,$
$ f_i=\frac{n-i+1}{n}f_{i-1}+\frac{i+1}{n}f_{i+1}+1,$
$f_n=0$
...

[ChrisR.F wrote on 2016-11-02T06:28:16]

---

$f_i$ 的时候还有 $(n - i)$ 个要翻，那么确实有 $\frac{n - i}{n}$ 的概率翻对，变成 $f_{i + 1}$ 个。= =

[ftiasch wrote on 2016-11-03T09:23:35]

---

@ftiasch#4738 这样的话感觉应该是$f_{i+1}=\frac{n-i}{n} f_i$才对啊 QvQ

[ChrisR.F wrote on 2016-11-03T13:46:08]

---

@ChrisR.F#4740 下标是对了多少个啊，你翻对了一个，不是加一吗？

[ftiasch wrote on 2016-11-03T15:54:32]

---

