# 2015 四川省赛 H Range Query

「十一弱校连萌 之 强力热身」 H 题的讨论在这里~

[ftiasch wrote on 2015-10-01T06:59:58]

---

求此题解法。。 

[ltwy wrote on 2015-10-02T07:57:24]

---

对于序列的每个位置，可以求出它可能的最小值和最大值。
然后对于每个元素，可以求出它必须出现的区间。比如说，$RMQ(1, 3) = 10, RMQ(2, 9) = 10$，那么 $10$ 一定得在 $[2, 3]$ 中嘛。
之后就是求字典序最小的二分图匹配了。

[ftiasch wrote on 2015-10-02T08:15:48]

---

可以处理出graph_{i,j}表示在i位置放j可不可行。
然后跑二分图匹配..

然后正常向的匈牙利算法能够保证最后一个点的匹配点标号最小。
所以跑n次就可以搞定字典序辣。

[Nero wrote on 2015-10-02T08:16:01]

---

听的有点抽象... 怎么连边呢？

[ltwy wrote on 2015-10-02T08:23:41]

---

@ltwy#1299 

就是建立 $2n$ 个点，$x_1, x_2, \dots, x_n$ 表示 $n$ 个数字，$y_1, y_2, \dots, y_n$ 表示 $n$ 个位置，那么每个完备匹配就对应了一个排列。

看 [程序](http://git.icpc-camp.org/ftiasch/acm-icpc/blob/master/my-contests/2015-06-14-sichuan-province-contest/problems/rmq/src/solution.cpp#L61) 吧。

[ftiasch wrote on 2015-10-02T08:26:54]

---

谢叉姐Nero聚聚～

[ltwy wrote on 2015-10-02T08:35:39]

---

哦 还有一个问题。。 题目似乎并没有说c不重复啊。。  会不会出现 (a1, b1, c1) (a2, b2, c1) 的情况？ 并且(a1, b1) 和(a2, b2) 不相交？

[ltwy wrote on 2015-10-02T12:36:54]

---

@ltwy#1332 对。
这时候无解。

[ftiasch wrote on 2015-10-02T12:41:48]

---

@Nero#1294 正常向的匈牙利算法能够保证最后一个点的匹配点标号最小 这句话是什么意思？求大神解释。

[GAUSS wrote on 2015-10-03T10:16:24]

---

@GAUSS#1355 字面意思：如果正常地跑匈牙利算法的话，最后一个点匹配点的编号是（所有可行匹配中）最小的。

[ftiasch wrote on 2015-10-03T10:30:14]

---

@ftiasch#1356 假设只有点i到点i有边，最后一个点是n，n匹配n，最后一个点匹配的点编号并不是最小(1)，所以还是不理解。

[GAUSS wrote on 2015-10-03T10:33:27]

---

@GAUSS#1357 让我们再朗诵一下上面那句话：

如果正常地跑匈牙利算法的话，最后一个点匹配点的编号是（**所有可行匹配中**）最小的。

$n$ 匹配 $1$，这算是可行匹配吗？

[ftiasch wrote on 2015-10-03T10:48:49]

---

@ftiasch#1300 求问叉姐，你的程序是顺序处理1~n每个位置，然后每个位置尽量放最小的数（如果仍能构成完美匹配的话），下午我试了一下顺序处理每个数字1~n，然后每个数尽量放在靠前的位置（如果同上），结果WA了=w=自己不是很明白问什么。。

[Wind wrote on 2015-10-03T11:30:18]

---

@Wind#1360 因为后面会改前面的……

[ftiasch wrote on 2015-10-03T11:31:15]

---

