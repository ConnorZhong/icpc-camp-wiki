# Moscow Subregional 2011 B Big Number

给一个数列a[i]，长度为$n$，现在要去掉$k$个数，使得剩下的数#按原数列顺序#连接后得到的数最大。
$n \leq 10^5, k \leq 100$


[yzq986 wrote on 2017-08-09T16:39:33]

---

$O(nk)$ dp 啊

[ftiasch wrote on 2017-08-10T00:09:23]

---

@ftiasch#5221 恩。。我的想法是用f[i][j]表示 后i个数去掉j个以后，<长度，前12位> 最大为多少。
可这样如果转移的值相等，该从哪个转移过来呢。。

[yzq986 wrote on 2017-08-10T02:43:48]

---

@yzq986#5220 得到的数最大是什么意思呀？

[Fancy wrote on 2017-08-10T15:15:41]

---

@Fancy#5225 字面意思。。把数字连起来以后，最大化这个整数

[yzq986 wrote on 2017-08-25T18:17:22]

---

@ftiasch#5221 向叉老师求教呢qvq

[yzq986 wrote on 2017-08-25T18:17:58]

---

@yzq986#5291 暂时不会啊。。。这是哪里的题？

[ftiasch wrote on 2017-08-26T02:19:15]

---

目前只会 $O(10nk)$的做法，$f_{i,j}$ 表示做到第i位去了j个的最大值。本来转移应该是$O(k)$的，但是对于每种数字找最近的跳过去是最好的，这样转移就变成10次了。实现用广搜就好了，像[这题](http://codeforces.com/problemset/problem/575/G)。
Update : 好像可以$O(10n)$。处理出最近每种数字是多少后，每一步试探一下下一步是多少，然后$K$当作是总花费。

[Y_UME wrote on 2017-08-26T03:17:12]

---

@Y_UME#5294 数字长度可能不是1

[zimpha wrote on 2017-08-26T03:30:17]

---

@zimpha#5295 意识模糊。。再想想

[Y_UME wrote on 2017-08-26T03:35:42]

---

在 @rowdark 大师的指导下会做了……

首先，肯定存在一个长度 $L$ 使得 $<L$ 的全部删掉，$> L$ 全部保留，然后在 $=L$ 的里面删若干个。我们可以先把 $<L$ 的删掉，之后假设数字长度都 $\geq L$.

之后我们考虑 $f(i, j)$ 表示前 $i$ 个数字里面删掉 $j$ 所能得到的最大数。显然
$f(i, j) = \max\{f(i - 1, j) + a[i], f(i - 1, j - 1)\}$.

我们近距离观察一下 $f(i, *)$ 这些东西。可能成为最大值的，只有一串互为前缀的东西。
记下来最长的那个，以及每个长度，之后可以 $O(k)$ 转移。

[ftiasch wrote on 2017-08-26T03:41:37]

---

@ftiasch#5297 怎么光速取出max?是要维护去除$L$长度前半部分的rank吗？

[Y_UME wrote on 2017-08-26T04:20:45]

---

@ftiasch#5297 恕我愚钝。。这个直接加为什么是对的呢。。选的数字的和最大 不一定保证 这些数连接起来最大呢。。。

[yzq986 wrote on 2017-08-26T04:21:29]

---

@ftiasch#5297 唔。不知道是不是理解错了。比如 $a[] = \{1,0,1\}$ , $f(i,*) = \{101,11,1,\}$.

我的思路是这样的。这个转移在考虑$>L$是之前取前者的，考虑$=L$时要考虑两者。

这个$f(i,*)$的前缀长度是差值为$L$的等差数列，且任意两个相邻的数字公共部分字典序短的不小于长的。

同时维护一下这个关系是$=$还是$>$,并维护一下最后$L$长度的值是多少。

$>L$时直接转移，$=L$是根据关系和最后$L$长度的值转移。

[Y_UME wrote on 2017-08-27T14:32:18]

---

@ftiasch#5297 
我们近距离观察一下 f(i, *)这些东西。可能成为最大值的，只有一串互为前缀的东西。
是说观察对于i相同，j不同的f[i][j]么
能否给个例子，没有理解这句话

顺便，题目来源是Moscow Subregional 2010的B题


[wyfenger wrote on 2017-08-27T16:12:15]

---

@Y_UME#5306 我觉得如果有 $>$ 的话，那么那个小的不可能成为最终答案，不记也行。
所以只有那个最大的要存下来，其他的跟它分不出大小的都是它的前缀。

转移确实有两种。。但是主代码手的意思是不需要考虑这么多。。可以 $O(K)$ 暴力算一下，暴力比较维护就好。

[ftiasch wrote on 2017-08-27T16:38:02]

---

