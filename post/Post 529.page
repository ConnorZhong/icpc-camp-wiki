# Codeforces Round #366 题解

# Thor

维护每个 app 的未读通知，每次操作清空。对于全局的操作，每次只操作新阅读的部分，总复杂度是 $O(n+q)$.

# Ant Man

考虑点 $v$（假设 $v \neq s, v \neq e$），那么点 $v$ 的入度、出度都是 $1$.
 考虑点 $v$ 的入边 $u \to v$，只要 $u < v$，那么点 $v$ 对答案贡献 $a_v + x_v$，否则对答案贡献 $b_v - x_v$，而与点 $u$ 无关。
所以转移时只需枚举入边、出边的 $2 \times 2$ 种方向。
但是需要知道，如果从左到右转移，点 $u$ 不一定存在。
注意到已经确定方向的点，一定是构成了若干条链。
所以只要 $dp(i, j)$ 表示考虑到第 $i$ 个点，前面构成 $j$ 条链的最小代价即可。
注意起点和终点比较特殊，（以终点为例）如果左边只有一个连通块，而且又包含终点，那么这时候无法向右连边。

# Black Widow

把变量看作点，子句看作边，因为变量的度最多是 $2$，所以图由一些环和链组成。
对于环，枚举一个变量的取值，破环为链做 dp。

# Captain America

不妨假设 $r \leq b$，那么就是要多染 $r$.
建立一个二分图，一边点表示行，一边点表示列，那么原题的点就是二分图的边。
限制的话，就是对于行点的流出（或者列点的流入）有上下界，跑上下界最大流就好。

# Iron Man

考虑链上的问题，就是等价于给 $n$ 条线段，问最左边的交点。很经典的问题，考虑扫描线，插入删除线段，相交的线段一定在某个时刻会在 $y$ 方向上相邻。

放到树上，做树链剖分，把一段树链拿出来，就是一个链的情况，套上面的办法解决即可。

p.s. 感觉挺难写的，所以这题我没写。

---

ABCD 的代码 https://git.icpc-camp.org/ftiasch/acm-icpc/tree/master/codeforces/704-codeforces-round-366

[ftiasch wrote on 2016-08-22T12:46:41]

---

咋突然就题解了

[xiaojudou wrote on 2016-08-22T16:36:37]

---

