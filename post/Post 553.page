# 2016 大连网赛数据探讨

因为实在太菜，所以在 HDU 刘老师的帮助下获得了大连网赛的数据……经过验证，至少包含以下问题：

1003 中，数据有重边。

1004 中，有一组
```
1000 1000
1 2
2 3
...
999 1000
1000 1001
```

标准输出是 $501500$，其实一条长度是 $1001$ 应该是 $501501$. 
猜测是最后把 dp 值累加的时候少加了 $dp[1001] = 1$……

1005 中，有一组
```
764 318508524 4164
```
标准输出是 91658.

下面援引神秘人士的证明答案 $\leq 91657$. 
```
???  21:23:11
这组数据答案错了啊
???  21:23:30
91657排就够了，不需要91658
???  21:23:57
我试试看能不能讲清楚这个证明
???  21:24:11
假设91657排不够，我来给出一个矛盾
???  21:26:46
现在我把所有学校按人数从大到小排列，每排塞5个学校（764*5<=4164）
逐排塞人
???  21:28:26
剩下的学校去塞每一排的空档，直到当前的学校每一排都塞不进为止
???  21:29:07
因为91657 不够，所以必然有剩下的，剩下的学校人数加上任意一排人数都大于 4184
???  21:29:11
4164
???  21:31:31
现在考虑，有多少排人数少于3475（=695*5，695=4164/6+1）
如果只有一排，或者没有哪排人数少于3475，那么总人数至少是
3475 * 91656 + 4164 = 318508764 > 318508524，矛盾
???  21:32:08
所以至少有两排人数少于 3475，假设是 i 和 j 排，其中先排的是 第 i 排
???  21:32:59
第 i 排人数少于 695 * 5，所以一开始排进去的 5个学校里面，至少有一个学校人数不超过 694
???  21:33:32
因为按照从大到小的顺序排，所以第 j 排的每个学校都不超过 694 人
???  21:33:58
694 * 6 = 4164，所以第 j 排至少排了 6 个学校
???  21:34:25
现在看剩下来的学校，因为现在每排都塞不下了
???  21:34:55
所以剩下的每个学校至少有 4164 - 3474 = 690 人
???  21:35:48
所以第 j 排的每个学校人数都至少是 690 人，690 * 6 > 695 * 5，所以第 j 排人数大于 3475， 矛盾
???  21:36:32
综上 91657排一定能排下 318508524 人
```

---

最后，祝你 AC 愉快。

[ftiasch wrote on 2016-09-13T14:02:22]

---

![](http://imgsrc.baidu.com/forum/w%3D580/sign=000ae741cbfdfc03e578e3b0e43e87a9/39f763d9f2d3572cd9298d638213632763d0c368.jpg)

[sd_invol wrote on 2016-09-13T14:29:59]

---

好菜啊。。

[xiaodao wrote on 2016-09-13T22:17:29]

---

然而清华九题。
这场九题是真的厉害，不仅要写出正解，还要揣摩出题人的心思，和出题人错一样。


[linyuzhou wrote on 2016-09-14T07:54:19]

---

@linyuzhou#4260 感觉八题还是挺可以理解的。。九题就需要一点运气了。。

[ftiasch wrote on 2016-09-14T12:18:43]

---

当时我们三个人盯着1005看了一个小时还是没有找到反例然后就滚粗了。。。
赛后参考某队的AC代码分析出了出题人的算法：
(1)算出在每一组h个人的情况下每行能出现多少个完整的学校x=k/h
(2)算出在每行最多只能出现x个完整的学校的情况下每一组的人数y=k/(x+1)+1
(3)输出按每组（除了最后一组）都是y个分组的答案（即把正常算法中枚举i=1~h取max变成只算i=y）
（猜测这个算法的来源应该是出题人看到了高数联1990年的题目然后直接把当时的某个题解的做法当成确界来用了。。。L mod k=0这个条件估计也是这么来的。。。）
所以对于3 18 9这个数据你应该输出2。。。
那么为什么有些数据里的答案反而更大呢？
这是因为出题人没有考虑L%y<=k%y的情况，只要L%y>0就视为L%y>k%y，假如答案刚好是在y取到的话那它算出来就很可能比你大1了
所以感觉现场AC的那些队都好大啊。。。我还是太naive了。。。根本猜不到出题人是怎么想的。。。

另外1006的数据也错了。。。数字个数不够所以不用scanf就会挂。。。当时卡了一个多小时。。。感觉相比之下还是03和04这种传统码码码题更容易和出题人做法一样啊（只要03不去重边04不像dls一样把点重标号基本都跟出题人一个做法吧）

[xllend3 wrote on 2016-09-14T16:13:05]

---

「因为实在太菜」。。。莫名的喜感😂

[ultmaster wrote on 2016-09-19T11:57:50]

---

@ultmaster#4346 A 不掉嘛= =

[ftiasch wrote on 2016-09-19T12:00:49]

---

