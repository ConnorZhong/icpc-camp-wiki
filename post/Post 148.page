# NEERC 2012 Moscow Subregional G Gadget Hackwrench

题意: 给一个 $V \leq 10\^5$ 有向的，但是忽略方向是一颗树的「树」，每次查询 $u \to v$ 是否可达，$Q \leq 10\^5$

介个题肿么做呢 0.0 我 lca 不知道该怎么套， 亲们可以详细的讲讲呀， thx

[TaoSama wrote on 2015-10-05T11:20:08]

---

随便设一个点当根，那么边有两种：「向上」和「向下」的。我们可以预处理 count[u] 表示 $u$ 到根的路径上「向上」的边有多少条，有了这个，我们可以 $O(1)$ 计算出任意路径上「向上」、「向下」的边的数量。

当询问 $u \to v$ 是否可达的时候，计算出 $\mathrm{LCA}(u, v) = w$，要求 $u \to w$ 路径上全是「向上」的边，$w \to v$ 路径上全是向下的边即可。

[ftiasch wrote on 2015-10-05T11:25:47]

---

@Varona#1479 向上和向下是随意嘛, 比如说读入的边是向上的？ 它的反向边是向下的咩？
还是说指向根的和远离根的 0.0 有点疑惑

[TaoSama wrote on 2015-10-05T11:37:12]

---

@TaoSama#1481 指向根或者远离根。

[ftiasch wrote on 2015-10-05T11:38:12]

---

@Varona#1482 0.0 大概懂辣 我去写写 蟹蟹叉老师呢

[TaoSama wrote on 2015-10-05T11:45:46]

---

