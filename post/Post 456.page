# 计蒜之道 2016 第四场 遗失的支付宝密码（困难）

@shdut#3772 直接用并查集维护

[zimpha wrote on 2016-06-13T07:53:43]

---

      密码中最多有 m 种不同的字符； 密码的最大长度为 n，但不能为空；密码的任意一个前缀都 不是 一个 square。square 的定义如下：
      a. 字符串的长度 l是偶数；b. 字符串的长度为 l/2 ​​ 的前缀和长度为 l/2​​ 的后缀相同。
     请问符合条件的密码有多少个。(http://nanti.jisuanke.com/t/11161)
      题解（http://blog.jisuanke.com/?p=270）里说的状态s（等价关系）怎么计算？


[shdut wrote on 2016-06-12T09:55:17]

---

@zimpha#3775 不太懂，什么算是等价关系？（哪些位置的字符相等吗？）

[shdut wrote on 2016-06-13T13:18:32]

---

@shdut#3781 dui 

[ftiasch wrote on 2016-06-13T13:26:39]

---

@Hayashimo#3782 怎样用状态S的最小表示呢？深搜的时候，每一位不都是要枚举当前的连通分量吗？还有公式里的m^(2*i-cnt) (cnt当前连通分量数)怎么得到的呢？

[shdut wrote on 2016-07-05T14:03:24]

---

