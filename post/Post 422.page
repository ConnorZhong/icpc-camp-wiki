# BZOJ 1162 网络改造

给一个n(n<=400)个点的有边权树，选择每个点都有花费，没被选择的点也有花费，这个花费是它到离它最近的被选择的点的距离，让你选择不超过P个点（至少选一个点），使总花费最少

暴力treedp+背包MLE了呀。。。用short的话，题目没给边权和点权的范围，short的范围似乎是不够的？求正确DP姿势orz
PS LZ太弱了不会单纯形，目前只求DP姿势orz

[asdfghj wrote on 2016-05-14T09:15:23]

---

您看树链剖分如何？

[ftiasch wrote on 2016-05-14T09:49:19]

---

@Hayashimo#3583 
LZ是个连树剖都还不会的废物 大概是没救了
这题开动态空间还是可以暴力艹过去的

[asdfghj wrote on 2016-05-14T16:30:42]

---

@DPSleeper#3586 

如果树链剖分的话，只要 $O(n^2 \log n)$ 空间就可以了。

[ftiasch wrote on 2016-05-14T18:03:08]

---

@Hayashimo#3587 

能否稍微说得详细一些？好让我扔给队友研究。。。

[asdfghj wrote on 2016-05-17T06:00:59]

---

@DPSleeper#3614 

说来也简单。。你大概要算一个 $dp(v, \cdot, \cdot)$，计算 $v$ 的时候，先递归到 $v$ 最大的子树 $v^*$。
那么只有走 $v$ 不是最大的子树时，才需要把 $dp(v, \cdot, \cdot)$ 存下来，那么自然只有 $O(\log n)$ 个要存了。

（应该没错吧？

[ftiasch wrote on 2016-05-17T07:47:20]

---

@Hayashimo#3616 

喔！！！虽然我不会树剖但是有种自己看懂了的错觉！！很震撼= =感谢

[asdfghj wrote on 2016-05-18T11:07:30]

---

