# Codeforces Round #329 D Happy Tree Party

请教各位大牛，这题怎么做？

[w20810 wrote on 2015-11-05T13:55:59]

---

floor(floor(x/n)/m)=floor(x/nm)
所以树链剖分维护一下连乘积就好了。注意判断一下乘法溢出

[winoros wrote on 2015-11-05T14:18:56]

---

顺便维护一个乘积的log值就可以很方便地处理溢出问题

[quailty wrote on 2015-11-05T14:32:30]

---

求一下LCA 然后用并查集维护结点i往上第一条大于1的边 由于每次修改都是递减的 所以不会出现把1变成大于1的情况 于是就可以暴力搞啦 因为每次除一个大于等于2的数最多60几次就变成0啦

[xing89qs wrote on 2015-11-05T14:38:00]

---

@winoros#2456 @quailty#2457 @xing89qs#2458  THX :）

[w20810 wrote on 2015-11-06T13:07:00]

---

虽然A了，但是我不知道我这个路径压缩的时间复杂度。。。http://paste.ubuntu.com/13139510/

[w20810 wrote on 2015-11-07T03:06:02]

---

这样的话，假如是一条链，边权全部为1，每次压缩一半的路径。。

[w20810 wrote on 2015-11-07T04:48:41]

---

