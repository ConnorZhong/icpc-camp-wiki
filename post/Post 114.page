# 2015 四川省赛 C Censor

「十一弱校连萌 之 强力热身」 C 题的讨论在这里~

[ftiasch wrote on 2015-10-01T06:57:56]

---

kmp不用重新计算next吗？

[ElemenT wrote on 2015-10-01T07:19:07]

---

对着敏感词做 KMP，为了方便把它看作一个自动机。

然后拿一个栈进行匹配，顺便维护每个元素匹配到了自动机的哪个节点。一旦发现栈顶匹配了整个敏感词，就把栈顶的 $m$ 个元素全部删掉。

[ftiasch wrote on 2015-10-01T07:23:02]

---

@ElemenT#1113 泥直接跑一下KMP，然后用栈维护一下每个位置和模式串匹配到哪个位置，和整个串匹配则直接把一个串长度那么多的栈顶退掉，然后从栈顶这个位置接着继续匹配

[quailty wrote on 2015-10-01T07:23:36]

---

@ftiasch#1119 

@quailty#1121 
懂了。。by the way 这个网站做的很赞

[ElemenT wrote on 2015-10-01T07:33:38]

---

哈希 怎么判断匹配了敏感词呢呀 - - 
我预处理 母串 $i开始m-1$长度子串的哈希值 然后每次栈就退一个 - - 发现不行 如果之前还有可以匹配的 就错了
就不好判断了 会退化成$O(n^2)$

[TaoSama wrote on 2015-10-01T08:30:44]

---

@TaoSama#1153 维护整个栈的的前缀的 hash。比如说是栈是 $a_0, a_1, \dots, a_t$，其中 $a_t$ 是栈顶。

那么我们算出 $h_t = \mathrm{MAGIC} \cdot h_{t - 1}  + a_t$，每次只要 $a_t - \mathrm{MAGIC}^m a_{t - m}$ 就能得到栈顶 $m$ 个元素的 hash 了。

[ftiasch wrote on 2015-10-01T08:32:50]

---

@ftiasch#1155 0.0 懂啦~ 叉姐手误啦~ 应该是$h_t - MAGIC^m×h_{t-m}$ 谢谢叉姐呢
UPD: 呜呜呜  还不太会Latex 咦 公式出不来了

[TaoSama wrote on 2015-10-01T08:40:50]

---

弱弱想问下，如果进行多次裸KMP，每一次把当前能匹配到的结果都标记掉。为什么会WA？
求样例叉掉我的思想
感谢！

[Killer47 wrote on 2015-10-01T09:17:48]

---

@Killer47#1163 为何窝觉得泥连样例都过不了……比如这样？
aaa
aaaaa

[y761823 wrote on 2015-10-01T09:22:04]

---

@y761823#1164 
一次性的删掉了aaa，然后j=-1，这样又是从头匹配。

[Killer47 wrote on 2015-10-01T09:24:37]

---

@Killer47#1165 不是很明白……要不泥发一下泥的代码链接？

[y761823 wrote on 2015-10-01T09:34:47]

---

@y761823#1167 http://paste.ubuntu.com/12630795/ 窝蠢蠢的代码。。表嫌弃。。

[Killer47 wrote on 2015-10-01T09:41:53]

---

@Killer47#1169 
abba
ababbababba
正解：bba，泥的代码输出：abb
泥要明确题目写的是：每次删掉第一个出现的w，然后再重新找第一个w

[y761823 wrote on 2015-10-01T10:03:21]

---

@Killer47#1169 还有泥这个复杂度并不对，泥可以自己跑一下：
w : ab
p : 25W个a + 25W个b

[y761823 wrote on 2015-10-01T10:07:26]

---

@y761823#1171 十分感谢！！！
#没表情表达感激之情

[Killer47 wrote on 2015-10-01T10:12:14]

---

@Killer47#1172 可以学习一下如何发送表情 233

[ftiasch wrote on 2015-10-01T10:22:14]

---

@Killer47#1172 [IMG]http://static.icpc-camp.org/flarum-emotion/blue-cat.jpg[/IMG]

[y761823 wrote on 2015-10-01T10:25:56]

---

根本不用kmp和自动机啊。。。。。，用数组模拟一下栈，然后strncmp就水过了，1156ms（逃。。。。。

[MJRT wrote on 2015-10-01T10:30:41]

---

