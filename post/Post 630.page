# AtCoder Regular Contest 063 F

[题目链接](http://arc063.contest.atcoder.jp/tasks/arc063_d)
题目大意：在二维平面上有一个矩形，初始状态整个矩形都是白色的，左下角坐标(0,0),右上角坐标(W,H),给出矩形内的N个点，对于每个点(xi,yi)做以下四种操作中的一种：
1. 将矩形内x<xi的区域染成黑色
2. 将矩形内x>xi的区域染成黑色
3. 将矩形内y<xi的区域染成黑色
4. 将矩形内y>yi的区域染成黑色
问怎样选择每个点的操作可以使得最后所得的白色矩形的周长最大，求最大周长。
* 1≦W,H≦1e8
* 1≦N≦3×1e5
* 0≦xi≦W (1≦i≦N)
* 0≦yi≦H (1≦i≦N)
* W, H , xi and yi 均为整数.
* If i≠j, then xi≠xj and yi≠yj.
求解QAQ

[burglar wrote on 2016-11-08T14:51:52]

---

所谓 Largest Empty Rectangle.

考虑分治。如果 $p$ 是最左边的点，那么从 $p$ 到分割线，所有纵坐标小于 $p$ 的点的最大值确定了矩形的下边界，对称地能确定上边界，可以得到一个 C 形状的区域。同理对于最右边的点同理。

那么合并的时候，就取决于 $y$ 坐标区间交的长度 + 两个点 $x$ 坐标的差。讨论一下交的样子：

1. 如果是一边包着另一边，那么交长度被一边唯一确定，另一边看着是个二维询问最大值，那么可以一维排序一维树状数组。

2. 如果是一边确定一个，看着也是类似的。

总之这样是 $O(n \log^3 n)$？ 复杂度有点大。。。

[ftiasch wrote on 2016-11-08T15:58:37]

---

答案至少为$max(W , H) * 2 + 2$，所以这个空矩形一定会穿过至少一条中轴线。
考虑穿过 $x = \frac{W}{2}$的情况。把点按照y轴排序，左右要维护两个半矩形，实际上就是维护两个凸链，维护凸链的时候用线段树维护一下$width - y$这一项。

[Y_UME wrote on 2016-11-09T02:09:57]

---

@ftiasch#4759 感觉log的三次方会TLE，官方题解也是分治，但是给的复杂度是一个log。然而日语理解不能，而且感觉题解没写清楚orz。

[clatisus wrote on 2016-11-09T13:14:05]

---

@clatisus#4761 不是吧。。我觉得我那个回复是 sense 是对的，但是 technical detail 全是错的。。

首先我说的解法复杂度好像是 $O(n \log^2 n)$ 的，然后按照 @Y_UME#4760 的提示，这个分治也是没必要的。所以就是 $O(n \log n)$.

[ftiasch wrote on 2016-11-09T14:09:01]

---

@Y_UME#4760 为什么一定穿过中轴线啊

[King_George wrote on 2016-12-10T02:27:43]

---

@King_George#4869 不然周长就不够大了

[ftiasch wrote on 2016-12-10T14:01:31]

---

