# Changchun 2015 E Rebuild

按顺序给出 $n$ 个顶点 $a\_1, a\_2, \dots, a\_n$，其中 $a\_i$ 与 $a\_{i+1}$ 相邻（ $a\_n$ 与 $a\_1$ 也相邻）。以每个点为圆心做一个圆，使相邻顶点的两个圆相切，求使得所有圆面积和最小的半径 $r\_1, r\_2, \dots, r\_n$ 及其最小圆面积和。相等面积时，任意输出一组 $r\_1, r\_2, \dots, r\_n$ 即可

[aclsh wrote on 2015-10-18T08:48:37]

---

就是有 $n$ 个等式 $r\_i + r\_{i + 1} = |a\_i a\_{i + 1}|$，那么设 $r\_1 = x$，其他的 $r_i$ 可以用 $x$ 线性表示出来。

对于 $n$ 是奇数的情况，$x$ 是唯一的。$n$ 是偶数就是一个二次函数求极值啦。

[ftiasch wrote on 2015-10-18T08:53:29]

---

二次函数求极值的时候先求出来r1的取值范围，然后和对称轴的关系分类讨论，求出来r1使得总面积最小，然后依次求出r2到rn，如果全都不小于0，则有解。还有什么trick吗 现场wa了很多次

[aclsh wrote on 2015-10-18T09:00:15]

---

@aclsh#1902 我猜……没有？

[ftiasch wrote on 2015-10-18T09:04:21]

---

@Varona#1903 那就是写跪了…感谢解答～

[aclsh wrote on 2015-10-18T09:06:58]

---

小朋友跟我说 E 一直在卡精度（

[xiaojudou wrote on 2015-10-18T09:20:24]

---

@NPC#1905 题目委屈地说:"人家都规定边长是整数了,还想闹哪样?"

[VincentLDL wrote on 2015-10-18T09:31:16]

---

e题好像是因为乘pi的原因导致的精度损失

[skt wrote on 2015-10-19T03:50:07]

---

@skt#1950 pi不是定义成acos(-1)吗 怎么会出现精度误差？

[aclsh wrote on 2015-10-19T03:58:41]

---

pi要放在外面统一乘。。放里面会出问题

[ZLG wrote on 2015-10-20T04:32:56]

---

可以证明解是唯一的，精度问题只有判断impossible时候才存在，加个eps就好了

[syoboi wrote on 2015-10-20T04:35:33]

---

@ZLG#1992 看来窝是因为这个卡了全场。。。sigh。。。

[kybconnor wrote on 2015-10-20T12:32:59]

---

@ZLG#1992 同卡全场...但是为什么逐个乘pi会出问题啊？

[aclsh wrote on 2015-10-20T15:11:23]

---

@aclsh#2024 咱其实觉得没啥道理……如果你们其他地方实现得没问题的话。

[ftiasch wrote on 2015-10-20T15:25:31]

---

@Varona#2025 我猜标程const pi = 3.1415926

[yangyue wrote on 2015-10-20T16:04:41]

---

@Varona#2025 这个也看不出来啊 再整理一下思路：奇数直接求解。偶数分类讨论：1.编号偶数边之和！=编号奇数边之和，不可能成立 2.反之，利用前n-1个式子，将r2到rn用r1表示，利用r2到rn不小于0，解出r1的范围[l,r]，然后跟面积求和的二次函数对称轴mid进行比较，1）r小于l，不可能成立；2）r小于等于mid，r1取r；3）l大于等于mid，r1取l；4）否则，r1取mid。再将r1代入1式到n-1式解出r2到rn，如果r1到rn存在某个数小于0，那么不可能成立，否则成立。

[aclsh wrote on 2015-10-20T16:16:43]

---

@aclsh#2027

「奇数直接求解」解出来要 check 范围对不对？


 「再将r1代入1式到n-1式解出r2到rn，~~如果r1到rn存在某个数小于0~~，那么不可能成立，否则成立」

你的 $r_1$ 不是已经满足这一点了嘛……

[ftiasch wrote on 2015-10-21T00:44:13]

---

@Varona#2029 奇数是直接检验范围 偶数那个写多了 代码里面没写最后再检验一遍范围 还是不知道哪里错了orz…

[aclsh wrote on 2015-10-21T03:42:38]

---

