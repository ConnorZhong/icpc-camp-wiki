# 算法马拉松17F 概率好题

甲乙进行比赛，他们各有 $k_1, k_2$ 个集合 $[L_i, R_i]$，每次随机从他们拥有的每个集合中都取出一个数。
$S_1$ 是甲取出的数之和，$S_2$ 同理。若 $S_1 > S_2$ 则甲胜，若 $S_1 = S_2$ 平局，否则乙胜。
分别求出甲胜、平局、乙胜的概率。
（显然这个概率是有理数，记为 $p/q$，则输出答案为 $p \cdot q^{-1} \mathrm{mod} (10^9+7)$.

[shdut wrote on 2016-09-01T05:11:53]

---

@shdut#4146 请问具体的数据范围呢

[zimpha wrote on 2016-09-01T05:32:25]

---

($k_1, k_2 \leq 8, 1 \leq L \leq R \leq 10^7, T \leq 5$)


[shdut wrote on 2016-09-01T05:42:21]

---

跟概率有啥关系。。。

一个简单的方向：如果 $k_2 = 1, L_{2, 1} = R_{2, 1}$，那么问题至少是 $\sum x_i < a$ 的计数。这个我只会容斥。

看数据范围也就是容斥 + 组合数搞搞吧。。

[ftiasch wrote on 2016-09-01T05:53:40]

---

感觉不就是 sb 题……

你把甲的数字写成 $L_i + x_i$ 的形式 ($0 \leq x_i \leq R_i - L_i$)，乙的写成 $R_i - y_i$ 的形式。
基本上，你就是要统计一个 $\left(\sum_{1 \leq i \leq k_1} (L_i + x_i)\right) - \left(\sum_{1 \leq i \leq k_2} (R_i - y_i)\right) < 0$ 的数量。
整理后就是 $\sum_i x_i < C$ 这种形式的问题（$C$ 是常数）。
然后就是套 www.spoj.com/problems/RNG 啦

[ftiasch wrote on 2016-09-01T06:03:23]

---

还是数论太弱了。

[shdut wrote on 2016-09-01T06:12:17]

---

@shdut#4151 这种题就是组合题，不算是数论题的……

[ftiasch wrote on 2016-09-01T07:22:32]

---

心疼出题人，想了好久的原创变成了原题的离散版本。

[litaoye wrote on 2016-09-02T08:47:23]

---

