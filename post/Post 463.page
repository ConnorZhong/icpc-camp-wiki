# 比较难受的一题

http://paste.ubuntu.com/17728830/

ACM在X星球的基地需要能源。幸运的是，在某个广阔的地区里探测到了很多资源，但这个
地区离基地很远。基地必须派机器人去采集资源。 
基地有两种类型的机器人：G-型机器人，负责采集资源；R-型机器人，负责修补桥梁。为了
节省能源，每个机器人都被限定了转向。机器人每步只能向南或东移动。G-型机器人能采集能源，
当它到达有资源的地方（称为E-地）时，它将采集E-地的资源，采集到一个单位的资源后，它立
刻离开这个地方，然后向南或东继续移动，或者被运回基地。R-型机器人能修补桥梁，使得其他
机器人能通过。 
为了简化题目，本题将这个地区用N×M的矩阵来表示。矩阵中的每个单元的状态为： 
.：机器人能通过这个地方； 
#：山或河流，机器人不能通过； 
B：一座被损坏的桥梁，在修补好之前G-型机器人不能到达这个地方，而当一个R-型机器人
到达这个地方时，它可以修复这座桥梁； 
E：表示一个E-地。在这个地方已经探测到有一定数量的资源。当一个G-型机器人到达这个
地方，它采集一个单位的资源。当这个E-地的资源全部被采集完，这个地方将会塌陷，两种类型的机器人都不能通过这个地方。 
G-型机器人能采集尽可能多的资源，没有容量限制。两种类型的机器人都能被运到矩阵中任
何一个地方，也可以从任何一个地方运回基地。但运输过程会损坏机器人，如果一个机器人有 L
的生命期，那么它最多只能被运输L次。 
基地的工作人员计划用这两种机器人采集所有探测到的资源。但是由于每个机器人都有一定
的生命期，可能完成不了这个任务。所以必须分析整个地区的地图，判断是否能采集到所有的资
源。 
输入描述： 
输入文件的第1行为一个正整数T，1≤T≤21，表示测试数据的数目。接下来有T个测试数
据。每个测试数据的第1行为4个整数：N, M, Lr, Lc，N和M表示地区的大小，Lr表示R-型机
器人的生命期，Lc表示G-型机器人的生命期；接下来有N行，每行有M个字符，描述了地区的
地图； 接下来一行有若干个整数ti， 1≤ti≤50, 1≤i≤50， 整数的个数与地图中字母"E"的数目一样，
每个整数表示对应的E-地探测到的资源数目。 E-地按从北到南、 同一行从西到东的顺序进行编号。  
每个测试数据中至少有一个、至多有50个E-地，被损坏的桥梁数目少于11个。 
输出描述： 
对输入文件中的每个测试数据，如果可以完成任务，输出"Yes"；否则输出"No"。 
样例输入：  样例输出： 
3 
 
2 2 1 4 
.# 
#E 
2 
 
3 3 2 3 
E#E 
BEB 
##E 
1 1 1 1 
 
2 2 0 0 
EE 
Yes 
No 
No 

[takeoffyoung wrote on 2016-06-23T03:21:09]

---

2^11 枚举修哪些桥，判下R机器人能否完成，然后跑个流看G机器人是否能完成？

[lostRating wrote on 2016-06-24T07:46:59]

---

