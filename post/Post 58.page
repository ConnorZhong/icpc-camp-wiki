# 2015 北京赛区网络赛 E Border Length

[传送](http://hihocoder.com/problemset/problem/1231)
大意是给出一个简单多边形(1k个点)和一个圆，求多边形与圆相交部分的边界长。
[这里](http://dreadnought.icpc-camp.org/2015%20ACM/ICPC%20Asia%20Regional%20Beijing%20Online#TOC)给出了一个解法。
觉得这个在诸如点在圆上等边界情况的处理有些麻烦(本着身为蒟蒻能偷懒就偷的原则)，然后有一个O(n)的想法，但是wa了(失意体前屈)，测数据测烦了，求巨巨指明其理论正确性。
多边形的每条边与圆的交点把这条线段分为圆内和圆外的部分(最多3个部分)，圆内的部分直接计算长度(ans1)，圆外的部分计算对应的弧的长度，逆时针为正顺时针为负(ans2)。答案就是ans1 + fabs(ans2)。感觉酱紫几乎不需要处理边界情况，然而并不能ac...

[vainman wrote on 2015-09-21T05:15:41]

---

本来想这题的时候就一直在深入思考怎么写这$O(n)$的算法，后来想了一段时间后才注意到$n$的范围。

然后就暴力$O(n^2)$冲上去了……什么都不用特判。

[sd_invol wrote on 2015-09-21T07:18:02]

---

@Sd_Invol#486 求教不用特判的是怎么做的？求圆弧时用的交点包不包括在圆上的点和切点？

[vainman wrote on 2015-09-21T08:15:05]

---

交点当然只看交点呀，切点就扔掉了，对答案没有贡献。

[sd_invol wrote on 2015-09-21T10:02:38]

---

@Sd_Invol#493 
（不好意思，我表达有问题...）我是想问
1.如果多边形的一个点在圆上，这个点怎么处理？ 不是要判严格穿过圆的点吗？
2.在判弧的中点在不在多边形内的时候，如果中点在多边形边界上怎么处理？（有可能对于两个交点，优弧和劣弧都在多边形边界上）

[vainman wrote on 2015-09-21T10:19:52]

---

@vainman#495 

既然取出了所有交点，那么如果中点落在边界上就只意味着这两个点都在边界上，对答案的影响可以忽略不计。

[sd_invol wrote on 2015-09-21T10:33:11]

---

@Sd_Invol#497 抱歉，我不太懂您的意思，比如下面三组数据？（抱歉x2,  暂时没找到地方上传图片）
```
3
0 1
-1 -1
1 1
0 0 1

8
-1 0
1 0
1 1
-1 1
-1 2
2 2
2 -1
-1 -1
0 0 1

7
-2 0
-1 0
0 2
1 0
2 0
2 -2
-2 -2
0 0 2
```


[vainman wrote on 2015-09-21T10:54:59]

---

把多边形的顶点，以及每一条边与圆的交点找出来。，然后判断相邻两点与圆的关系，假设两点之间是圆的割线，那么计算线段长度，否则计算圆弧长度，累加起来就是答案。。。。

[rabbit wrote on 2015-09-21T11:23:27]

---

@Sd_Invol#497  这三个图
![img](http://vmphp.sinaapp.com/tmp_img/QQ20150921184502.jpg)

[vainman wrote on 2015-09-21T10:56:52]

---

Orz  已经懂了，劳烦了昂神真是罪大恶极。。

[vainman wrote on 2015-09-21T11:27:20]

---

@rabbit#501 谢谢

[vainman wrote on 2015-09-21T11:28:05]

---

@vainman#480 窝就是O(n)的写法ac了呀？

[kybconnor wrote on 2015-09-21T16:12:33]

---

@kybconnor#520  这组是 5 | 5 | 13 嘛。。。

[xiaodao wrote on 2015-09-21T16:41:28]

---

@xiaodao#523 我算出来的也是

[lby wrote on 2015-09-22T04:39:03]

---

