## 1007 Rikka with Match

upsolved by ConnorZhong

---

ConnorZhong's Solution：

考虑 $f(i,j,[0/1])$，表示当前节点 $i$ 是否已经被选为匹配，且以 $i$ 为根的子树的方案数。状态转移可以通过巧妙的实现从 $O(nm^2)$ 变成 $O(nm)$。复杂度证明思路大致是合并的时候，我们只考虑每两个节点对都在 LCA 处进行合并，但是有 $m$ 的限制，所以可以转化成每个点最多和其他的 $m$ 个点在 LCA 处产生贡献，因此转移次数就是 $O(mn)$。很惭愧，这个题本来应该获得更好的结果的，类似的题目 `CF 815C`，当时还很仔细的研究了这个东西..比赛中没能反应过来，好弱啊。

## Summary 
### Replay

开局分散看题，zjc 直接看了 1011，签了个名。hzh 和 jyb 瞄准了 1006，jyb 签到吃了一波翔，影响不大，在 hzh 辅助下也通过了。 zjc 趁机又单独签到了 1008，hzh 和 jyb 想了 1001， hzh 卡着常直接冲了过去，开场一小时 4 题，几乎都是 1A，节奏特别好。jyb 和 zjc 想了想，一看是个 AC 自动机，zjc 直接又跑路了（？），刚下机的 hzh 又被 zjc 推了上去，慢慢地 hzh 也把这个东西 A 掉了（强到爆炸啊）。期间 zjc 和 jyb 分散想了 1003 1005 1007 和 1009。其中 1009 是个很显然的数位 dp，但是因为 zjc 很弱，感觉自己写不了这个，等 hzh 一下机直接又甩锅了。1007 zjc 推了个树 dp 的转移式子，觉得像是个卷积，扔给了 jyb 改 ntt。但是 jyb 好像失了智完全想不起来怎么写了，很狼狈地互相推锅。因为 zjc 最近研究了 jls 的集训队论文，很自告奋勇地去想 1003，思路偏了外加自己对可持久化数据结构的不熟悉，没能想到做法。在 hzh 上去上 1009 后，因为一系列玄学操作和粗劣的写法。tle 得很惨，zjc 见势不对，回去帮 hzh 想优化，留 jyb 一个人去想 1007，在尝试了一系列操作外加打表疯狂提交，附带最后 hdu 卡评测，比赛最后也没能通过 1009。 相当于比赛最后 3 小时，hzh 一直在艹 1009， zjc 和 jyb 一直挂机划水。很惨惨啊。

这一场整个 buaa 打得都很菜啊。摸鱼队摸到了集训队的 rank 1，也是很惊喜啊？


**zjc** zjc 今天 eazy 题的签到率很高。比赛过程中因为紧张（？）频繁地推锅，很不好。赛后嘴炮的话 1009 确实 zjc 估计短时内搞不定这个，甩锅给当前状态最好的 hzh 是很好的选择。其中 1007 一开始想偏了，很糟糕。最后想到用 ntt 转移也不是很棒（tls 队用同样方法 tle 卡全场）。anyway，好菜啊。

**hzh** 今天没想到还不错啊，开场队友过水题还算很顺利吧，发现1001这个只输出0和1收到提示就往bitset想，然后发现挺水的啊，然后居然全场第三卡时过了，然后1002有点像之前周末的一道题啊，果断秒了啊，然后发现第一次这么靠前，其他题过的人都挺少的啊，就开始想09，开始时间复杂度算的不怎么对，果断TLE，然后用二分还是T了，有点没辙啊，这个时间卡的太紧了，最后全场都在TLE，评测机已经要跪了，最后想到的正确算法时间复杂度还是高了点，完场交了个区间更小的终于过了。。今天就是罚时场啊，虽然3个小时没过题，但是还是苟了个校内第一啊= =

**jyb** 06没1A，好蠢啊。。然后打打酱油划水。。其他中档题有点无能为力。。其他也没什么可以吸取的教训，做题去吧