## SRM688 Easy

> 给一个括号序列,每次可以选择一个区间,翻转,并将括号反向,问是否能在十步内使其合法

这题显然是要想一个十步以内的构造方法,首先我们先操作一次使其左右括号数相等.
接下来就要敢想.设"("的值为1,")"的值为-1,设1到i的和为$s[i]$,假如我们每次都是操作从1到$r$的序列,为了使操作后1到$r$的$s[]$值都大于等于0,操作前对于所有的$0\le i\le r,s[r]-s[i]\le 0$始终成立.我们可以找到一个合法的最大的$r$,然后可以发现,为了最大化$r$,$s[r]$值肯定是0,且对于所有的$r+1\le i\le n,s[i]-s[r]\ge 0$即$s[i]\ge 0$始终成立(否则找到一个最小的不成立的$i$,$r$的值可以变成$i$).也就是说我们只需要将1到$r$做一次操作,整个序列就合法了.
所以最多只需要两次操作.

## SRM688 Medium

> 给一个括号序列,给出一些区间,每次可以交换两个位置,问最小交换次数使这些区间上的括号序列合法

首先交叉的两个区间$[a,b],[c,d] (c\gt b)$ 可以分成三个区间$[a,c-1],[c,b],[b+1,d]$ .
因此区间之间的关系形成一棵树.
对于一个区间,先处理完其包含的所有区间.设"("的值为1,")"的值为-1,如果该区间的和为o,最小前缀和为w,分以下两种情况讨论:

+ $o\gt 0$ .那么需要将$\frac{o}{2}$ 个左括号换成右括号,尽量换靠右的,这样能使w的值保持不变
+ $o\lt 0$ .那么需要将$\frac{-o}{2}$ 个右括号换成左括号,尽量换靠左的,这样能使w变成w-o.

之后,我们还需要进行$\left \lceil \frac{-w}{2} \right \rceil$ 次操作以使括号序列合法.
需要注意一些细节和实现技巧.

## SRM688 Hard

> 给一个括号序列,将其分成两部分,使得两部分的权值之和最小.权值计算方式见原题.

一个贪心的想法是先求出原序列中每对括号的深度,然后将深度为2的倍数的括号对放在s1,其他的放在s2.
这样确实是正确的.为什么呢?
证明还不会,先放着.