F - Black Radius
================

**题意:**

给你一个树，定义点集$f(u, d)$代表从$u$开始往外走最多$d$步所能走到的点。

现在给你你一个集合$S$，问$|u \in S \forall d f(u, d)|$的大小。

**题解:**

首先我们考虑，对于一个集合，我们需要一个"canonical form"。

首先为了分析，我们不考虑全集。

那么对于一个点集，总有些位置没有覆盖到，我们认为它的直径中心为这个点集的发起点$s$，那么$d$自然就是这个点集的半直径了。

注意直径可能长度为偶数，但是在不包括全集的情况下，这两个点选哪个其实是唯一的。

那么根据这个唯一性，我们可以一个不漏的把所有可能的点集分配到每个点头上。

具体来说就是每个点$u$算出来一个$upper[u]$，代表以这个点为中心，$0\leq d \leq upper[u]$都是分配给这个点$u$的。

但是现在有一些点我们不能拿它来作中心，不能用唯一表示这样的方法来不重不漏计数了，这可怎么办呢？

可以发现，相当于一些点$f(u, d) = f(v, d')$，而$u$是好点，而$v$不是。

如果$u, v$是相邻的点，而且$f(u, d) = f(v, d')$的话，我们可以得出$f(u, d + 1) = f(v, d' + 1)$，所以我们考虑对于每个点$u$，在分配给它的集合里面，他能表示出来的长度一定是一段，而且上界就是$upper[u]$，那么问题就是怎么算这个$lower[u]$呢？

其实这个就有点像最短路那样做，对于$S$里面的点，$lower$当然是0，那么开始在树上做最短路即可。

[AGC8 F.cpp](AGC8%20F.cpp)
