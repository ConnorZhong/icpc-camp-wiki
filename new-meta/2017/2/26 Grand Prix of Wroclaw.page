F. Epic
=======

**题目:**

现在你有一个长度为$n$的排列$p$，但你不知道这个排列到底是什么，现在给你告诉你一个长度为$n$的数组$a[i]$，意思是$p[i - a[i]] ~ p[i + a[i]]$都比$p[i]$严格小。

问满足以上要求的所有排列有多少种。

**题解:**

用$f[l][r]$代表在$l - r$内的答案。然后枚举这个区间里面最大的数字是哪个。

考虑一个数字在这里面最大，假设是$i$，那么肯定有$i - a[i] = l$，我们找这个区间满足这个条件的最大的$i$，以及满足$j + a[j] = r$最小的$j$，这两个都是可能的最大值的位置。枚举一下转移就好。

这个题目的恶心地方在于，这个选取要$O(1)$，需要用到一些单调的性质优化一下。还有要特判无解。

[Grand Prix of Wroclaw F.cpp]()

K. Bridges
==========

**题意: ** Pokemon Ranger有$n$个基地($n\le 1000$),
第$i$个基地有$k_i\le 1e9$个ranger, 且坐标在$(x_i,y_i)$.
现在有一条河需要监测, 这条河是平面上一条直线. 监测方法是,
在这条河上建立$k$个监测站. 一种建立方法的代价,
是每个ranger跑到离他最近的监测站的距离的和.
这个距离是曼哈顿距离(确实是曼哈顿距离). 问这个代价最小可以是多少.

**做法: ** 每个基地有个离河最近点,
且他离河上一点的距离是个分3段的连续线性函数.
所以监测站只有$2n$个可能位置. 假如预处理$f(i,j)$表示,
在监测站可能位置$i$和$j$都建立监测站($i<j$, $i$和$j$之间无其他监测站),
最近点在这两个监测站之间的那些基地产生的代价和.
这之后就可以随便$n^3$DP再决策单调性优化. 怎么预处理呢? 考虑固定一个$i$,
$j$增大时, 中间的基地会由跑到监测站$j$变成跑到监测站$i$. 用堆维护一下,
就知道这个边界了.

Comment
-------

Miceren
=======

这一场还是败在了中期题完成情况不是太好，导致拖慢了后面的题目的完成速度。

F题没有很快想到，感觉这类题的确套路只能如此，以后再看到这一类题应该直接相当这样的平方状态DP。

Y
=

题出的真好 服了
