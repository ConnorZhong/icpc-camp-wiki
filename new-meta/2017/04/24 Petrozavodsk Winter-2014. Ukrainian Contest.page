D. Circle Kingdom
=================

**题意：**

平面上有$n\leq 3.5e5$个严格不相交的圆（但可能包含）。这些圆是城堡。然后有很多堆人$m\leq 3.5e5$，每堆人有个人数，有个坐标。一个人进出城堡需要花关税（不同城堡可能不同）。现在所有人想聚集在某一点开会。公主可以选择$k$个城堡，免除这个城堡所有的关税。问最小总花费是多少。

**做法：**

扫描线+set维护上半圆下半圆，把树建出来，然后就是树形dp了。

考虑用一棵全局的平衡树从大到小维护所有城堡的关税，然后到某个圆内时，用总的和减去最大的$k$个的和就是聚集点在这个圆内的答案了。维护的话就是dfs的过程中，修改平衡树中某个城堡的值：往下走一步，意思是这个子树内的人不用走出这个城堡，但外面的人要走进去。dfs回来的时候撤销，就维护好了。

[D.cpp](2017/04/24 Petrozavodsk Winter-2014. Ukrainian Contest D.cpp)
