A. Baggage
==========

**题目:**

现在有如下棋盘: "\_\_...\_\_BA...BA", 共$2n$个空格和$n$对"BA".
现在允许你每步拿走相邻的两个字母, 放到别处的相邻的两个空格里去,
拿走字母的地方就变成了空格.
要求你在最少的步数内将棋盘变成"\*A...AB...B\*",
即连续$n$个A和连续$n$个B相邻, 位置不限. 输出方案. $3\le n\le 100$.

**做法:**

首先根据样例发现, 答案就是$n$. 要根据$n$模$4$构造不同的方案,
看$n=3,4,5,6,7,8$的暴力答案获得提示, 就能构造出来了.

B. Buffed Buffet
================

**题目：**

有两类物品。第一类是离散的：每种物品，第$i$种物品拿$n$件的重量是$n\cdot w_i$，收益是$n\cdot t_i-\frac{n(n-1)}{2}\Delta t_i^2$。第二类是连续的：第$i$种物品拿重量为$n$（可以为实数）的收益为$\int_0^n (t_i-x\Delta t_i)dx$。现在问你一共有$n\leq 250$种物品，填满重量恰好为$w\leq 1e4$的背包，最大收益为多少。

**解法：**

离散的物品可以用斜率优化dp。连续的物品二分导数，转化成求极值点的位置（注意有斜率为0的物品，要特殊处理一下）。然后枚举一边的重量，合起来就行了。注意答案可能为负数。

[B.cpp](2017/3/19 WorldFinal2014 B.cpp)

F. Messager
===========

**题目:**

平面上有两个人同时开始走路, 他们各自不停地走一个折线, 走到终点就会消失,
且他们速度均为$1$单位长度每单位时间. 现在第一个人要给第二个人发一条消息,
消息以发送的时间第一个人的位置为中心呈圆形扩散,
半径随时间线性增长且和人的速度一样. 只要这个消息扩散到第二个人的位置,
就算收到消息. 问消息扩散用时最短是多少. 注意必须在第一个人消失前发送,
第二个人必须在消失前收到. 折线拐角数$n\le 50000$.

**做法:**

二分扩散的时间$t$, 对齐第一个人的轨迹和第二个人未来$t$秒的轨迹,
若此两轨迹在某一时刻距离不超过$t$, 则这个$t$可行, 否则不可行.

G. Metal Processing Plant
=========================

**题目:**

给你$n \leq 200$个人，每两个人之间有一个不友好程度。要求你给这$n$个人分成两组，使得两组内部不友好程度最大值之和最小。

**题解:**

首先考虑双指针扫，用2SAT来判断是否合法。复杂度是O(n\^4)。

考虑到枚举最大值的时候，上面的边都是双向边，构成的强连通分量结构只有O(n)中不同结果，我们对每一种结果分别二分较小值的答案，再用2sat
check，最后复杂度为O(n\^3 \log n)。

[G.cpp](2017/3/19 WorldFinal2014 G.cpp)

H. Pachinko
===========

**题目：**

有一张$n\leq 20$列，$m\leq 1e4$行的地图。有些格子是障碍物X，有些格子是目标T，有些格子是空地.。最开始会在第一行某个空位随机放下一个球，之后每个空位就会以某种概率（输入）朝4个方向随机游走。当球下一步会撞到障碍物或跑出地图时，会被拉回来再随机一次。当到达任意一个目标时游走结束。问到达每个目标的概率是多少。

**做法：**

高斯消元。考虑每个非障碍格子有个流量。有一个超级源，他的流量是1，他以相同概率流向第一行的格子。所有目标格子再流回到超级源，就构成了环流。每个格子流量要平衡，且每个格子的出度的流量比例需要满足它朝四个方向游走的的概率比例。然后逐行解方程。每行把下一行当作已知量，可以解出这一行每个格子的流量，关于下一行格子流量的线性表达式。然后代入下一行的方程，再把下下行当作已知量。这样到最下面一行，就可以把方程解出来了。然后从下往上推一遍就得到每个格子的流量了。注意最后的答案要归一化。

[H.cpp]()

L. Wire Crossing
================

**题目:**

在一个平面上，有$n$个线段，现在问从一个点到另外一个点，需要穿过最少多少个线段。（这里可以不走直线）

**题解:**

farmland，注意有些区域是嵌套的，要平方枚举一下各个区域的嵌套关系。把图建立出来，后面的就是一个bfs。

[WorldFinal2014 L.cpp]()
