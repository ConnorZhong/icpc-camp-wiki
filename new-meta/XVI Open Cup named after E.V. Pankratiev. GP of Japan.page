C. Kuru Kuru Sushi
==================

**题意:**

现在有一个环，被分成了$n \leq 1e5$份，每一份长度为$w[i]$，现在需要你给每一份定向，使得$\sum dist(s_i, t_i)$最小，其中$dist(s, t)$代表的是从$s$到$t$点，在这个图上的最短路。如果不存在最短路，距离为无穷。

**题解:**

首先我们处理全都是顺时针和逆时针的情况。

否则，肯定存在一个位置$i$，$i$右边那条边顺时针方向，i左边那条边逆时针方向。
考虑所有的$s_j, t_j$，假如$t_j = i$那么肯定这种情况无解。如果$s_j != i$，那么这些区间方向确定，我们可以直接计算答案。如果$s_j = i$，对于这些区间，我们对他们的$t_j$排序，那么最后肯定分成两边，我们枚举一下划分的方案，那么最后就变成了，给定一个当前每个区间的方向，问是否可行的问题。

可行当且仅当我们不存在两条方向不同的路径，同时走到了一条线段上。我们使用数据结构维护，每次可以把一段区间染白色(or
黑色)，撤销，问是否有位置被染了两种颜色。这个是经典的线段树问题，可以解决。

然后就是一个我们枚举分叉点$i$，在移动$i$的过程中维护当前的答案与线段树即可。

[XVI Open Cup named after E.V. Pankratiev. GP of Japan C.cpp]()

E. Enclose Points
=================

**题意: ** 有个farmland, 保证边在除了端点的地方没有交, 但是不保证连通.
现在询问多次某个点是不是在那个无限区域内.

**做法: ** 首先扣farmland. 然后判断点在多边形内用这个方法:
枚举多边形穿过该点所在竖直向上射线的一条边, 若从左至右穿过则+1,
若从右至左穿过则-1(右端点刚好落在竖直线上的不算),
最后加起来等于1为在内部, 等于0为在外部.
现在多个farmland加起来就是大于0为在内部. 这样就可以扫描线啦.
