D. Chemistry
============

**题意:**

你有$N \leq 1e5$杯水，每个杯子一滴水。现在你可以互相倒水，如果把$a$杯子中的水倒入$b$中，必须倒$b$中水的量。
现在要求你构造一个倒水过程，使得杯子$1$中水量恰好为$k$。

**题解:**

首先此题有无解情况。无解情况为

-   $n$为奇数且$k = n$。

-   $n$为偶数，且$n$不是2的幂次，$n - 1 \leq k \leq n$。

这个可以自己尝试证明

否则，如果有解，我们可以转化问题，变成一个恒定的形式 ==&gt;
$n$为奇数且$k + 1 = n$。

我们把$n$二进制分解为$2^{a_1}, 2^{a_2}, 2^{a_3} ... , 1$。这样总共花费了$n$步。我们的目标是把他们弄成$2$杯水。

我们不断的从一开始最大的杯子往一开始$1$的杯子里面倒水。这个过程中，$1$这个杯子里面的水一直是$2$的幂次，而且越来越大。如果$1$这个杯子里面的水和另外某杯水大小相同了，我们就把另外一杯水倒入当前的$1$杯子。这样在$log$步以内就能弄出来只剩下$2$个杯子。

当前我们有两杯水，分别装有$a$, $b$，且我们知道$a + b$为奇数。

我们开始反复对着倒水，一直到某一杯水量为1，那么另外一杯自然就是我们要的答案。

这是因为，我们每次互相倒一次水，相当于$a' = a * 2 (MOD n)$,
$b' = b * 2 (MOD n)$。由于$n$为奇数，所以$2$在这里有逆元，不超过$\phi(n)$次后一定有一个变成1。

[code](URALChampionship2015_D.cpp)
