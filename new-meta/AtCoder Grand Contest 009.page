E. Eternal Average
==================

**题意:**
给你$n \leq 3000$个$1$，$m \leq 3000$个$0$。现在你每次可以拿$k$个数字，然后取他们的平均值，放回去。一直这么做直到他们只剩下一个数字。

问有多少种本质不同的数字可以生成。

**题解:**

考虑最后形成的数字的形式。肯定是$X = \sum \frac{a_i}{K^{b_i}}$。注意，我们有$a_i < K$。

这种题目的一个技巧是，如果我给你一个最终的数字，怎么判断它是否可以用$n, m$表示出来。

首先写成 分母为$k$的幂次的分数 相加的 最简形式。

考虑这样的话，$\sum a_i$的$1$的个数是必要的。那么$0$要多少个呢？

考虑我们真的有了那么多$1$，一个最简单的构造出这个$X$的方法自然就是写成$X = \frac{X' + a_1}{K}$这样的递归形式，那么其实$0$的个数也就确定了。

可以证明，这样子用的$0$的个数是最少的。

那么我们$1, 0$个数有多怎么办，可以看到，我们$K$个$1$可以缩小成一个$1$。$0$也同理。

假设用$f[n][m]$代表这种情况下的答案。那么我们可以在最外层就开始枚举我们最后实际上用到了的$1$的个数和$0$的个数。

然后再$Dp$的时候，我们枚举这一层$1$的个数(也就是$a_i$具体是多少)。

注意复杂度，我们的$n + m$是$k - 1$的倍数，那么可能的状态数是$O (\frac{n^2}{k-1})$，而我们枚举的复杂度是$O(k)$，所以最后复杂度不超过$O(n^2)$。

[E.cpp](AtCoder%20Grand%20Contest%20009%20E.cpp)
