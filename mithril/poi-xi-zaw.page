POI XI Stage I -- The Competition(zaw)

Without loss of generality we can assume that for each vertex in the graph at the beginning of the lead path in $v_0$ (although the task does not preclude the existence of vertices, which do not lead none the corridor, they will have no effect on the outcome). In that case, each vertex in the graph, say v, we assign the shortest path from $v_0$ to $v_i$ oznaczycja by $s(v)$ (if such there are many shortest paths, we choose any of them). Let $x_1, \ ldots, x_d$ be neighbors $v_0$. For $i = 1, \ldots, d$ denote the $T(i) =  \{v \in V: \mathrm{path } s(v) \mathrm{starts from the edge } (v_0, x_i) \}$.

Of course it can happen that $T(i) = \emptyset$, with $T(i) = \emptyset$ for some values ​​of $i$. In addition, we assume $T(0) = \{v_0\}$. It is easy to see that the sets $T(i)$ form a division of $V$, ie, every vertex is in exactly one of those collections. Recall now our observations and consider how many collections of $T(i)$ may pass us matching cycle $C$. First, let us know footpath $P_1 = v_0, \ldots, v_j$. We see that all its vertices, except for $v_0$, located in one set of $T(q)$, for $v_1 = x_q$. Now let us consider the second path, ie path $P_2 = v_j, \ldots, v_k$. We remember that $v_j \in T(q)$, but $v_{j +1} \in T(p)$ for $p \neq q$. What happens next? Suppose one of the next vertex path belongs to the set $T(r)$ for $r \neq v$. We will show that there is then a simple cycle $C$, consisting of at least three edges and containing $v_0$, but shorter than $C$.

Let $w$ be the last vertex on the path $P_2$, which belongs to $T(r)$ and let $u$ be the last vertex on $P_2$ in front of, which belongs to $T(P)$. If $w = x_r$ and related outgoing edge on the path leading $P_2$ to $v_0$. We can obtain a cycle $C'$ by gluing path $s(u)$ of this part of the path $P_2$, which starts at $u$, otherwise the cycle $C'$ is formed by gluing path $s(w)$ of this part of $P_2$, which begins in $v$. In both cases, the cycle $C'$ is less than $C$. This is impossible, and so vertices $v_{j +1}, \ldots, v_{k - 1}$ all in one set of $T(p)$. Furthermore, we see the path $v_{j +1}, \ldots, v_{k}$ is a shortest path from $v_{j + 1}$ to $v_k = v_0$ Of the paths that pass only after the vertices of $T(P)$.