MIPTCamp 2016 Day5 - Japanese OI Selection Test 2016

A. Matryoshka \[Bacon\]
=======================

题解：求最长反链，离线一下即可。

B. Solitaire \[Lolicon\]
========================

题解：DP。首先无解的条件容易得出，四个边角必须有棋子，上下边界不能有连续的空白，否则填不满。然后分析如何计算方案数。假如中间一行只能通过上下相邻来填满，那么显然每列是独立的，可以把每列的偏序给排在一起算出答案。现在考虑可以通过左右相邻来填，那么会使得中间一行的格子之间产生先后的限制，于是我们用f\[i\]\[j\]\[0/1\]表示前i列已经填满，第i列的中间的格子是第j个被填上的，是否要求第i+1列的中间的格子在其之前被填上，转移的讨论较为容易。利用前缀和优化转移可以做到$O(n^2)$。

C. Employment \[Lolicon\]
=========================

题解：一维段查询。考虑从大到小依次加入每个数对答案的贡献，显然如果相邻两个格子都比它大-1，有一个0，否则+1，每个询问转化为查询前缀和，离线树状数组维护即可。

D. Sandwich \[Bacon\]
=====================

题解：对每个格子拆成两个点，表示先取哪块，则可以建出一个DAG出来。对每个点用bitset求出前驱有多少个即可，bitset内存池重用即可解决存储问题。

E. Toilets \[Lolicon\]
======================

题解：分析性质。将每个女生看成$+1$，男生看成$-1$，不公平度$A$相当于把最后的$A$个男生移到前面。设最大的前缀和为$x$，则答案为$max(0,x-(2n-2a)+1)$，a是男生的个数。于是直接计算最大前缀和即可。

F. Sushi \[Rowdark\]
====================

题解：暴力分块。“容易”发现①一个操作通过一个块时，相当于将这个块中最大的数换出来（如果其比块中最大数小）；②一群操作通过一个数时，相当于将这群操作中的最小数换出（当这个数比最小数大时）。于是这个题只需每个块将整体操作记录下来，当需要重建时利用性质②重建即可。

G. Telegraph \[Lolicon\]
========================

题解：贪心。一定是砍成若干条链，每个连通块是环加外向树。对于树上的部分直接留最大的那个后继，对于环上的部分，要么额外砍掉一条环上的边，要么某个节点砍掉了其在环上的后继。

H. Dangerous Skating \[Rowdark\]
================================

题解：BFS。无视走完会变成冰块的条件，向$4$个方向走到底距离为$1$，向$4$个方向走一步距离为$2$。

I. Worst Reporter 2 \[Rowdark\]
===============================

题解：贪心。从大到小依次贪$A$数组的匹配，多个匹配时匹配能匹配中的$D$值最小的；如果不行，那么就相当于加上了一个限制，即$\#[ D_j \ge B_i ] \ge Unmatch$，$Unmatch$为到这个数为止失配的匹配数量。证明不是很显然，但比较容易感受到的是，这么加的限制基本上是最松的限制了。
