TopCoder SRM 668 Lolicon

代码见arena中OIerRobbin的提交。

250 PaintTheRoom
================

一个n\*m的网格图，从任意点出发到任意点结束，要求每个格子恰好经过k次。问是否有解。

k=1显然有解。k&gt;1
nm为偶数时显然有解。nm为奇数时，考虑对格子黑白染色，则两种颜色格子数量之差大于1，必然无解。

450 WalkingToSchool
===================

一张n个点m条边的有向图。n,m&lt;=2000。问是否存在一个k，使得对任意k'&gt;k均有从0到1以及从1到0的长度为k'的路径。

首先0，1必须强联通。然后当且仅当0，1所在的连通块当中所有简单环的gcd=1时满足题目条件。有两种check方法。1、可以对2～n判断是否能够k染色，相当于枚举这个gcd。2、可以暴力找出0号点所有长度&lt;=2n的环求gcd。这相当于是gcd(a,b)=gcd(a,a+b)。

1000 BrainStuck
===============

一种语言有+-\[\]四种指令。仅有一个寄存器初始为0，可以存任意整数。+表示寄存器+1，-表示-1。\[\]是循环，当寄存器为0时\[跳转至\]，当寄存器非0时\]跳转至\[，否则不动。问长度为n的不死循环的程序有多少个。

dp。重点看循环的情况。首先有一些观察：

1.  对于任意循环，循环结束时寄存器总为0。
2.  假如进入循环时寄存器为0，则循环里可以是任意合法（括号匹配）的程序。
3.  假如进入循环时寄存器为x不等于0，
    a.  如果只有单层循环，令循环内的操作是+delta。则不死循环的条件等价于x与delta符号相异，且|x|能被|delta|整除。
    b.  如果是嵌套循环，则不死循环的情况除了最内存循环外一定只会运行一遍，形如\[+delta,进入第一个内层循环，任意+0序列\]。

设dp\[i\]\[num\]\[lev\]表示现在长度为i，寄存器为num，现在嵌套了lev层循环有多少种方案。

num=0时转移为 +1/-1/加入一个无用循环/结束一层嵌套循环

num!=0时转移为 +1/-1/加入一个单层循环/开始一层嵌套循环

注意一个单层循环如果只被运行一遍可能会被嵌套循环重复计数。复杂度是$n^4\sqrt{n}$。
