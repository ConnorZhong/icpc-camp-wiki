MIPTCamp 2016 Day4 - Botan Investment Cup

A. Guess A Number \[Lolicon\]
=============================

题解：交互。精妙。首先分析如何才能达成题目条件。这个交互模型显然是一棵决策树，每个叶子的深度就是所需要询问的次数。而要期望情况下最佳，需要建成一棵完全二叉树，且最深和次深层的叶子个数固定。但要满足题目要求，我们不能采用某个特定的决策树，而必须要使得每个数（尽可能）等概率地随机出现在最深层。其次思考怎么搞才能完成几乎等概率。将相邻的数奇偶分组，每次随机选取若干个组放在最后一层，这里我们不需要两两独立，因此只需要把这些组拼成一个环，随机一段连续的即可。但这样对于奇数情况会使得最后一个数始终出现在次深层，不过计算期望之后仍然满足题目要求。**最后在实现上还需要注意，随机一段连续的对，不能直接等概率选取次深层的连续一段扩展一层，而必须等概率选取一个开始的对，再计算次深层哪些点需要扩展才能够得到正确的等概率分布。**

B. Path Choosing \[Bacon\]
==========================

题解：首先一遍dfs求出每个点出发的方案数，对于每个点的出边只保留一个和不超过INF的前缀，在出边中选取方案数最多的边作为重边。

重边的组成了一些环套树，在环套树上倍增。再找个数据结构维护修改长度。

实现有一些讨厌的细节。

C. Distanced Strings \[Lolicon\]
================================

题解：精妙的构造。首先取一个在$((k-2)/2, k]$范围内的质数$p$，[伯特兰-切比雪夫定理](https://en.wikipedia.org/wiki/Bertrand's_postulate)保证这样的质数一定存在。初始个数是$p$，长度是$1$，为$p$种字符各一个。现在每次将串的个数扩大$p$倍，串的长度扩大$p$倍再$+1$。将原来的块搞$p$行$p$列，对于第$i$行$j$列的块将其元素加上$i*j$，并在第$i$行的所有串前加上第$i$种字符。这样相同的字符个数是$1+p+p^2+\dots+p^(l-2)$，$l$是倍增的次数，而长度是$1+p+p^2+\dots+p^(l-1)$，个数是$p^l$，所以可以满足题目要求。

D. Subcubes \[Lolicon\]
=======================

题解：超高速解。考虑最后一个限制，如果一定满足，就不用再递归下去。如果一定不满足直接递归下去。否则枚举不满足的第一位再递归下去。这样看起来像是一个比2小的底数的指数级算法。

E. Super Backpack \[Bacon\]
===========================

题解：比赛时的[做法](https://gist.github.com/resodo/b10303c67fc03458c836db84b46dafbd)，计算量为$5*N*(16*18+5*4*\log N)$。

F. Rain \[Lolicon\]
===================

题解：物理题。分类讨论，判掉无解的情况。对于有解的情况，可行的时间是一个区间（可能退化为一个点或者有一边无穷），这时将再讲人和车转到雨的坐标系当中计算降雨量最小的路径。

G. Points And Circles \[Rowdark\]
=================================

题解：答案与点的位置无关，为$C(n, 0) + C(n, 1) + C(n, 2) +C(n, 3)$。

H. Vectors \[Bacon\]
====================

题解：对向量分块，每块维护平方次顺序发生变化的时刻，计算块内的向量与全部向量之间对答案的贡献。复杂度$O(n\sqrt{n}\log n)$。

I. Cartesian Tree \[Lolicon\]
=============================

题解：公式。插入一个点，会对答案产生贡献当且仅当它x排序后左右两个点中有一个比它低。于是第$i$个点产生的贡献是$\frac{2i-1}{3}$，可以用调和级数公式计算。

J. Maximal Angle \[Bacon\]
==========================

题解：枚举i，计算所有i,j的答案。其他点都关于i做反演。i,k,j三点的外接圆被反演成了一条直线，最大夹角则反演了最大直线距离。确定j之后，最优的k则是一侧点集的切点。正方做两遍graham即可。

K. Bipartite Graph \[Lolicon\]
==============================

题解：性质。仔细分析题目性质，考虑形成了哪些连通分量。发现是一个类似辗转相除的过程。于是对于每次相除，先判断现有的边能否全部连通，如果不能则继续递归下去，能则在这一段内二分。此时所有点的标号形成连续的最多两段，于是可以方便地计算出来。
