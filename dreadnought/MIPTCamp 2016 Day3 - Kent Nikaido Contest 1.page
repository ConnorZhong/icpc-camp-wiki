MIPTCamp 2016 Day3 - Kent Nikaido Contest 1

A. Tetris Puzzle \[Lolicon\]
============================

题解：构造。观察到parity0的那两块和1的那两块在副对角线上分别占2*2和4*1，于是按1000四循环标每条副对角线，每个parity为1的块对答案的parity的贡献恰为1。

B. Shift and Paint \[Lolicon\]
==============================

题解：组合。当$N=L$时，直接burnside。当$N>L$时，按$L$分奇偶。$L$为偶数则可以排序，答案直接组合数。为奇数时可能会有最多一个逆序对，因此要加上所有数字都不同的排列数。

C. Pianist \[Bacon\]
====================

题解：bfs出所有最大次数不超过5的所有可能，然后解方程判断是否能从某个可能达到目标状态。方程的元$x_1,\dots,x_7$表示每个相邻对走了多少次。

合法的解需要都非负，并且对于初始状态不能达到的位置要为0。

D. Driving \[Rowdark\]
======================

题解：贪心。注意到只会重复走mst上的边，之后贪心即可。

E. Coins \[Bacon\]
==================

题解：对于一个局面，最后的取法为：

确定设后缀极小值集合$T=\{i|\forall j>i, w_j>w_i\}$，对于不在$T$中的金币，按原本的parity分配给两人。

设$T=\{p_1<p_2<p_3<...\}$，$p_1$一定给先手，$p_i$的归属由$p_{i-1}$的parity决定。

有了这个结论之后STL瞎搞搞就好了。

证明的话，考虑三枚硬币A,B,C。

对于最后一轮，如果B没有被翻过，p1拿到B+C，p2拿到0。如果B被翻过，p1拿到max(B,C)，p2拿到min(B,C)。

看倒数第二轮的情况，等价于现在只有两枚硬币，A和min(B,C)，p2行动，p1已经初始有了max(B,C)的分数。

继续归纳下去，即可证明，不再赘述。

F. Forbidden Puzzle \[Bacon\]
=============================

题解：如果对于一个合法的最终局面的每条边标等号和不等号，可以发现所有合法的2x2的矩形内部的四条边里面都有恰好两条不等号。

所以等价的想法就是分配这些不等号，使得每个2x2的矩形内部都有恰好个不等号，并且对于一定相等的两个格子之间一定是等号，并且满足边界限制。

对每个2x2的矩形建一个点，根据parity分左右，两个矩形共享一条边就连一条流量为1的边即可。

G. TRAX \[Lolicon\]
===================

题解：分类计数。分析题目性质，发现可能的case只有三种：每列都相同、每行都相同或者存在一个十字形。每种的数量都可以线性计算。

H. Pyramid Decoration \[Lolicon\]
=================================

题解：组合。显然翻转最底层某个位置对上面的影响是可以叠加的。计算后发现是组合数，于是可以用lucas直接算。打表找规律也可以。

I. 2D Pyramid \[Lolicon\]
=========================

题解：计数-钩子公式。取到点$(x,y)$的方案数等价于大小为$(x-y+1) \times y$的矩形的杨氏图表的个数。于是两个点的情况就是两个矩形构成的$L$形的杨氏图表的方案个数。使用钩子公式。预处理阶乘和阶乘的前缀乘积可以快速计算。

钩子公式：设杨氏图表共$n$个格子，第$i$个格子在横竖方向上形成的$L$形的长度是$l_i$，则杨氏图表的总方案数为：

$$
\frac{n!}{\prod{l_i}}
$$

这也可以用来计算广义Catalan数，只要将其想象为一个杨氏图标即可。

J. Foot Game \[Lolicon\]
========================

题解：贪心。如果要覆盖所有的区间，至少要最多层数那么多。看能否去掉一个区间使答案减1.

K. Pyramid Game \[Rowdark\]
===========================

题解：博弈。当$n$为奇数时，由于每次操作都会改变总和的奇偶性，故胜负是确定的；当$n$为偶数时，必败态为总和为偶数且最小值也为偶数。
