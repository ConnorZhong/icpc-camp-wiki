TopCoder
========

![alt text](/girlish_number.jpg) ~~没有少女编号看我要死了~~

-   Todo List

    -   701 DIV1 600

    -   700 DIV1 1000

    -   699 DIV1 1000

    -   696 DIV1 900

    -   684 DIV1 1000

    -   682 DIV1 900

    -   676 DIV1 1000

    -   675 DIV1 1000

2016.11.23 -
------------

鸽了鸽了……

2016.11.22
----------

-   2015 TCO R2A

    -   250 枚举$[i,j]$和$v$即可

    -   500
        先$n^3$求传递闭包，然后根据期望线性可加，只需对每个线索求出被找到的概率，考虑反面，如果一个线索不能被找到时，那么所有能指向这条线索的线索都不能被找到，直接计算即可

    -   1000
        树$dp$求出每棵子树的大小，然后枚举这个$Man$的$1$号点和$4$号点，那么$0$号点的个数是$1$号点往上到根的点数，$2$号点和$3$号点的对数是$1$号点除去$4$号点所在的子树之后从两棵不同子树中取两个点的方案数，$4$号点和$5$号点的对数是从$4$号的两棵不同子树中取两个点的方案数，维护一些和可以做到线性

2016.11.16 - 2016.11.21
-----------------------

拯救文化课大失败，不知道这几天干了啥

2016.11.10 - 2016.11.15
-----------------------

[青岛](http://exam.upc.edu.cn/)大血崩，回来颓了两天[osu](https://osu.ppy.sh/u/6423914)

2016.11.09
----------

编译原理 自顶向下语法分析方法 自底向上优先分析

2016.11.08
----------

微机系统与接口实验 1/3

-   2015 TCO R1A

    -   250
        预处理$[L,R]$所有数的数字集合，然后做一个高维前缀和就可以对每个数字集合知道包含这个数字集合的数有多少个，如果$\geq 2$那么更新答案

    -   500
        预处理出每个位置往后走$2^t$步能到哪，进而求出每个位置往后走$k$步能到哪，那么只要走$k$步之后两两不同就是合法的，于是每个终点对应一个起点集合，从集合中至多选出一个元素

    -   1000 考虑二分图有完美匹配的充要条件[Hall's marriage
        theorem](https://en.wikipedia.org/wiki/Hall's_marriage_theorem)，就是对于任意一个左边的子集$S$均有$|S|\leq |neighbour(S)|$，现在要让这个二分图不存在完美匹配，就是存在一个左边的子集$S$使得$|S|>|neighbour(S)|$，考虑枚举$S$，现在要选出一些右边的点不在$neighbour(S)$内，为此要删去这些点和$S$之间的所有边，选出删除代价最小的$n-|S|+1$个点删去即可

2016.11.07
----------

微机系统与接口实验 0/3

solo了[一套题](http://codeforces.com/gym/101149/standings)

2016.11.06
----------

-   SRM 696 DIV1

    -   300
        时光倒流，相当于一开始所有边都存在，每次选择一个点，删除它和它相邻的所有边

    -   550
        问号边的端点是关键点，不超过$2m \leq 20$个，于是取出包含这些端点的一个大小为$min(n,20)$的点集，记为$A$，剩下的点构成的集合记为$B$，枚举$B$中的点集判断是否是团，可以求出$B$中每个点集的最大团，然后枚举$A$中的点集，求出使这个点集是团所需要存在的问号边的集合，然后从这些点的邻居在$B$中的交集中选出一个最大团，更新这个问号边集都存在的情况下的最大团，最后对问号边集做一次高维前缀$max$

    -   900 总觉得随便tree dp一下就好了，待补

-   SRM 696 DIV2 250水题不表

    -   500
        建图，从源向每个位置连容量为$1$费用为$[A[i]==B[i]]$的弧，从每个位置向每种贴纸连容量为$1$费用为$-[B[i]==F[j]]$的弧，从每种贴纸向汇连容量为$1$费用为$0$的弧，跑最小费用最大流，总费用等于两个序列的距离增加量

    -   1000
        枚举点集，求出使这个点集是团所需要存在的的问号边的集合，更新这个问号边集都存在的情况下的最大团，然后对问号边集做一次高维前缀$max$

-   SRM 680 DIV2 250水题不表

    -   500
        检查当前位置能否坐下，否则往后找第一个能坐下的位置，用$set$维护不相交线段

    -   1000
        $dp_{i,j,k,l}$表示考虑了$\leq i$的数之后集合中是否可能恰好有$j$个$mod\ 3=0$的数、$k$个$mod\ 3=1$的数和$l$个$mod\ 3=2$的数，转移枚举$i+1$取不取，然后检查是否满足条件

2016.11.05
----------

这两套tc蜜汁做过

-   SRM 675 DIV1

    -   300
        $s<100$直接构造一条链，否则先构造一个$102$个点的菊花图，每加一个深度为$2$的叶子，长度为$3$的路径会增加$100$条，只需要加$s/100$次，然后在一个深度为$2$的叶子上接一条长为$s\ mod \ 100$的链即可

    -   500
        对每个查询，先扫一次，记录所有前$16$位的出现次数，可以求出第$k$大的前$16$位，然后再扫一次，求出在前$16$位和第$k$大的前$16$相同的数中所有后$16$位的出现次数，可以求出第$k$大的后$16$位，时间复杂度$O(nq)$，空间复杂度$O(\sqrt{INT\_MAX})$

    -   900 好难不会，待补

-   SRM 676 DIV1

    -   250 二分答案，判定全过程中水量最大值是否超过$C$

    -   450
        可以观察到当$k$足够大时每个位置的$SG$值都以$4$为周期，小范围打$SG$表即可

    -   1000 好难不会，待补

2016.11.04
----------

-   SRM 680 DIV1

    -   250
        $dp_{i,j,k}$表示考虑了$\leq i$的数之后集合中是否可能恰好有$j$个奇数和$k$个偶数，转移枚举$i+1$取不取，然后检查是否满足条件

    -   450
        每次操作后连通块个数减半，因此$2^k \leq n$，现在考虑用权值最小的$2^k-1$条边把$1,2,3,...,2^k$串成一条链，先在$2^{k-1}$和$2^{k-1}+1$之间连一条剩余边中权值最大的，然后递归连$1,2,3,...,2^{k-1}$和$2^{k-1}+1,2^{k-1}+2,2^{k-1}+3,...,2^k$，每次操作相当于向上归并一层，$k$次操作后恰好把$1,2,3,...,2^k$归并成一块，剩下的$m-2^k+1$条边随意加，保证图连通即可

    -   1000 如果$i$和$j$配对，连一条线段$[i,j]$，于是有两个观察：

        （1）任意两条线段要么相离要么一个包含另一个

        （2）任意作一条竖线，和这条竖线相交的所有线段要么左端点是同一种字母，要么右端点是同一种字母

        根据（1），线段的包含关系构成一个森林，对每棵树，结合（1）和（2）可以证明如下结论：

        （3）存在一个前缀的线段的左端点是同一种字母，剩下的线段的右端点也是同一种字母

        根据（3），可以得到如下$dp$：

        $with_{i,j,k,l}$表示考虑了前$i$个位置删掉了$j$个字符之后与第$l$种字符相同的有$k$个时的最小代价，转移考虑下一个字符是否删掉，如果不删，如果是第$l$种字符那么收集进来，否则和一个收集进来的字符配对，$without_{i,j,k,l}$表示考虑了前$i$个位置删掉了$j$个字符之后与第$l$种字符不同的有$k$个时的最小代价，转移考虑下一个字符是否删掉，如果不删，如果不是第$l$种字符那么收集进来，否则和一个收集进来的字符配对，需要注意$with$和$without$之间也要互相转移，如果$k=0$那么可以相互切换状态，如果下一个字符不是第$l$种字符，可以把已经收集到的$k$个第$l$种字符当作其他不同种字符的收集

2016.11.03
----------

-   SRM 681 DIV1

    -   300
        二分答案，按照零件标号$i$从小到大考虑，每次让$i \geq a$且$b$最小的工厂供应零件

    -   500 两个做法：

        （1）将原序列按照每一块大小是$s$分成$n/s$块，先for一次求出每个块的第一个数，于是可以通过$s$次计算还原出一个块，观察到除了每个块最大的元素之外所有元素半径都不大于$s$，现在对每相邻两个块，维护一个单调栈正反扫两次，可以求出除了每个块的最大元素之外所有元素的半径，现在只需考虑$n/s$个块的最大元素的半径，暴力扫出边界位于哪个块之后扫一遍所在块的元素即可，时间复杂度是$O(s\cdot n/s+(n/s)^2)$，空间复杂度是$O(s+n/s)$，取$s=\sqrt{n}$，那么时间复杂度是$O(n)$，空间复杂度是$O(\sqrt{n})$

        （2）观察到$x[]$可以正着推也可以倒着推，于是枚举中心点暴力往两边扩展，由于数据随机，时间复杂度是期望$O(n)$，空间复杂度是$O(1)$

    -   900
        预处理$go_{k,i}$表示有$k$个硬币时第$i$个硬币被拿走的概率，$dp_{k,i,j}$表示有$k$个硬币时第$i$个硬币和第$j$个硬币$(i<j)$经过若干次操作后相邻的概率，转移枚举拿走的硬币位于哪一段，于是第$i$个硬币和第$j$个硬币$(i<j+1)$对答案的贡献是$dp_{n,i,j}val_ival_j$

-   SRM 681 DIV2 250,500水题不表

    -   1000
        $dp_{k,s}$表示已经确定了最高$k$位并且$n$个数的前缀是否等于$m$的前缀的状态为$s$的方案数，转移枚举$a_0$的第$k+1$位，其他数的第$k+1$位都能唯一确定，然后检查是否满足条件

2016.11.02
----------

-   SRM 682 DIV1

    -   300 枚举第一条边和最后一条边，bitset求是否存在中间点

    -   450
        最后一定是缩成一个菊花图（其中可以有一条边是由环缩成的重边），树上的非叶节点都要缩掉，环上的如果有点没有外挂一棵树，可以保留一个不用缩掉，否则全都要缩掉

    -   900 好难不会，待补

-   SRM 701 DIV2 250,500水题不表

    -   900 强行打胜败态，把前m个状态压位

2016.11.01
----------

-   SRM 684 DIV1

    -   250
        暴力枚举选取的最小和最大元素，然后dp在这段区间中最多能选多少个数

    -   600
        如果一个序列满足后一个数是前一个数的至少两倍的倍数，则称这个序列满足性质$P$，预处理出满足性质P的长为$d$的序列个数，这里$d$最多是$logk$，然后考虑容斥，对于一个长为$n-1$的合法方案，在末尾加上$1$个数可能导致不合法，这表明最后$2$个数满足性质$P$，要减去长为$n-2$的合法方案数乘以满足性质$P$的长为$2$的序列个数，但是最后$3$个数满足性质$P$的情况被多减了，要加上长为$n-3$的合法方案数乘以满足性质$P$的长为$3$的序列个数，依此类推，只需要考虑到$logk$

    -   1000 好难不会，待补

2016.10.31
----------

[剧毒慎入](http://www.bilibili.com/video/av6857299/)

鸽了tc打[cf](http://codeforces.com/contest/733)然后被打哭了

2016.10.30
----------

训练了[一套题](2016-2017 CT S03E04: Codeforces Trainings Season 3 Episode 4)然后把tc鸽了

2016.10.29
----------

-   SRM 701 DIV1

    -   300
        可以预见当n足够大时会有周期，取周期$=lcm(1,2,3,...,10)=2520$，胜败态打表打到$100000$

    -   600 好难不会，待补

    -   900
        观察到$y^b=(n-x)^b=\sum_{i=0}^{b}\binom{b}{i}n^i(-1)^{b-i}x^{b-i}$，因此只需分别求出Fibonacci
        string的$x^0,x^1,x^2,...,x^{a+b}$之和，$dp_{i,j,0/1}$表示长为$i$的末尾是$0/1$的Fibonacci
        string的$x^j$次方和，转移根据$(x+1)^j=\sum_{k=0}^{j}\binom{j}{k}x^k$可以得到，然后矩阵加速

2016.10.28
----------

鸽了tc搞[51nod](http://www.51nod.com/contest/problemList.html#!contestId=28)去了，切掉ABCDE然后F写不动了GG

2016.10.27
----------

-   SRM 697 DIV1

    -   300
        考虑素数$p$，设$p^{x_i}||a_i$，那么有$x_i(b_i+1)\geq \sum_{i=0}^{n-1}x_i$，枚举$s=\sum_{i=0}^{n-1}x_i$，可以求出$x_i$的下界，然后对$x_i$从小到大排序，如果$x_{i+1}\leq x_i$那么令$x_{i+1}=x_i+1$，之后所有$x_i$之和应不大于$s$，$s$枚举到$500000$即可~~，不知道为什么是对的~~

    -   500
        对每个$i$，枚举$j$和$k$，需要计算有多少个$t$使得$a_j \oplus t < a_i \oplus t$且$a_k \oplus t < a_i \oplus t$，要改变两个数的大小顺序只需使$t$的第$|lcp|+1$位是$1$，将其他数关于与$a_i$的$|lcp|$分类，分两个数与$a_i$的$|lcp|$相等或不等两种情况计算贡献即可

    -   1000
        考虑prufer序列，记$dp_{i,j}$为序列中只有$\leq i$的元素并且序列长为$j$时所对应的所有树的点度之积的和，那么有$dp_{i,j}=\sum_{k=0}^{j}\binom{j}{k}(k+1)x_i^{k+1}dp_{i-1,j-k}$，整理可得$\frac{dp_{i,j}}{j!}=\sum_{k=0}^{j}\frac{(k+1)x_i^{k+1}}{k!}\frac{dp_{i-1,j-k}}{(j-k)!}$，~~黑科技~~FFT优化转移即可

-   SRM 698 DIV1

    -   250 枚举一个位置将原串切开，求两个串的编辑距离

    -   500
        考虑计算反面，求两个$size \geq 3$的点集的凸包交为空的方案数，枚举一条内公切线，必定经过两个点，在两侧各取一个点集即可

    -   1000
        每个cell周围8个点取出相邻的2个有8种选法，对每种选法拆出一个点，关于cell中心对称的选法分进同一组，于是8种选法会被分成4组，每组要求恰好取出一个，这样能保证这个cell周围取出的选法一定包含"C"或者"L"，于是可以建立一个2-sat模型，如果2-sat无解那么原问题无解，否则也可以构造出合法解，待补

2016.10.26
----------

-   SRM 697 DIV2 250水题不表

    -   550
        记$a_i=2^{x_i}$，那么有$x_ib_i\geq \sum_{i=0}^{n-1}x_i$，枚举$s=\sum_{i=0}^{n-1}x_i$，可以求出$x_i$的下界，所有下界之和应不大于$s$，$s$枚举到$500000$即可

    -   1000 ~~好难不会，~~同 DIV1 500

2016.10.25
----------

-   SRM 698 DIV2 250,1000水题不表

    -   500 枚举一个位置将原串切开，求两个串的LCS
-   SRM 699 DIV2 3道水题不表

2016.10.24
----------

-   SRM 699 DIV1

    -   250
        每一位是独立的，枚举所有数的xor和在第i位是0还是1，可以知道所有给出信息的wolf手中的数在这一位上是0还是1，如果这些wolf的xor和的第i位的值不符合枚举的值，要钦定一个没提供信息的wolf手上的数的第i位是1

    -   500
        考虑路径$S \rightarrow P_1 \rightarrow P_2 \rightarrow P_3 \rightarrow \cdots \rightarrow T$，其中$P_1$是某个$a_i$的倍数，$T$是某个$b_j$的倍数，并且$P_2,P_3,...$都要即是某个$a_i$的倍数也是某个$b_j$的倍数，考虑建图，$m$个点分别对应$(a_i,b_i)(i=0,1,2,...,m-1)$，如果$LCM(b_i,a_j)\leq N$则连一条$i$到$j$的有向边，从满足$S \ mod \ a_i=0$的点出发到满足$T \ mod \ b_j=0$的点结束，跑一个多源多汇最短路，边权都是1直接BFS即可

    -   1000
        对两个正方形的四种位置关系分类讨论，大枚举，需要dp预处理一些信息，待补![alt
        text](/srm_699_hard.png)

-   SRM 700 DIV2 3道水题不表

2016.10.23
----------

-   SRM 700 DIV1

    -   300
        如果friend是某个room的leader中则答案为1，否则枚举friend所在的room，这个room要留出一个空位给friend，然后按照leader从小到大的顺序填充每个room，如果能成功填充所有room则是可能的

    -   500
        本质是计算有多少个$n$个点的基环树森林满足在环上的点数之和为$k$，假设选定了$k$个位于环上的点，这些点连边的方案数是$k!$，这是因为一个置换可以拆成多个环，只需求出$n$个点$k$棵树的带标号有根树森林的方案数，记$dp_{i,j}$为按照顺序选定的$i$棵树大小之和为$j$的方案数，则有$dp_{i,j}=\sum_{k=1}^{j}\binom{j}{k}k^{k-1}dp_{i-1,j-k}$，整理一下即为$\frac{dp_{i,j}}{j!}=\sum_{k=1}^{j}\frac{k^{k-1}}{k!}\frac{dp_{i-1,j-k}}{(j-k)!}$，那么$\frac{dp_{k,n}}{n!}$即为多项式$(\sum_{i=1}^{n}\frac{i^{i-1}}{i!}x^i)^k$的$n$次项系数，$ans=k!\frac{dp_{k,n}}{k!}=dp_{k,n}$，要除以$k!$是因为选出的$k$棵树是不考虑先后顺序的

    -   1000 好难不会，待补


