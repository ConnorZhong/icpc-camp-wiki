A. Resident Evil \[Skywalkert\]
===============================

由于只求答案奇偶性，故将50种物品的奇偶性压位。剩下需要做的就是给一个矩形区域每个点异或一个数字，询问一个矩形区域每个点的异或和。

考虑一维的问题，区间加一个数、询问区间和，可以维护这个序列的差分序列，询问时则是求差分序列前缀和的前缀和，发现维护两个树状数组就可以了。

因而矩形加一个数、矩形求和能够用四个树状数组维护，所以异或和也是同理，只需要将数乘改成异或次数即可。时间复杂度$O(n^2 + m \log^2 n)$。

B. List wants to travel
=======================

C. hannnnah\_j’s Biological Test \[Skywalkert\]
===============================================

D. Mathematician QSC \[Skywalkert\]
===================================

由于$f(n) = f(n - 2) + 2 \cdot f(n - 1)$，其转移矩阵的秩为1，所以类似斐波那契数列地有$g(n) = \sum_{i = 0}^{n} {f(i)^2} = \frac{f(n) \cdot f(n + 1)}{2}$。

取一个尽量小的$T$，使得$g(T) \geq 10^8 \geq \varphi(s + 1)$，例如$T = 13$。若$n \cdot y < T$，直接枚举出$g(n \cdot y)$进行快速幂，否则利用矩阵快速幂计算$\frac{f(n) \cdot f(n + 1)}{2}\ mod\ \varphi(s + 1)$，将其加上$\varphi(s + 1)$再进行快速幂，这是因为当$e \geq \varphi(p)$时$x^e \equiv x^{(e\ mod\ \varphi(p)) + \varphi(p)}(mod\ p)$。而其中涉及到的除2，由于最终答案为整数，所以可以将模数乘2后计算答案时再除2。

E. Running King \[Skywalkert\]
==============================

存在至少一个环的简单无向图个数等于简单无向图个数减去无向森林的个数。

对于数列$a_0, a_1, \cdots$，定义其指数型生成函数是$\sum_{i = 0}^{\infty}{\frac{a_i}{i!}x^i}$。

设带标号n个点的生成森林个数的指数型生成函数是$F(x) = \sum_{i = 0}^{\infty}{\frac{f_i}{i!}x^i}$，带标号n个点的生成森林个数的指数型生成函数是$G(x) = \sum_{i = 0}^{\infty}{\frac{g_i}{i!}x^i}$，则根据集合计数的结论有$F(x) = e^{G(x)}$，取log后求导可以得到$F'(x) = F(x) \cdot G'(x)$，划开即为$\frac{f_n}{n!} = \frac{1}{n}\sum_{i = 0}^{n - 1}{\frac{(i - 1)^{i + 1}}{i!}\cdot\frac{f_{n - 1 - i}}{(n - 1 - i)!}}$。

上面这个式子可以进行关于$f_0, f_1, \cdots, f_n$的分治，对于计算$f_L, f_{L + 1}, \cdots, f_R$，令$M = \left\lfloor\frac{L + R}{2}\right\rfloor$，可以先计算出$f_L, f_{L + 1}, \cdots, f_M$，再将其在$f_{M + 1}, f_{M + 2}, \cdots, f_R$中的贡献产生，再去计算$f_{M + 1}, f_{M + 2}, \cdots, f_R$，则可以只通过卷积来求出$e^{G(x)}$，利用FFT可以做到$O(n \log^2 n)$，而模数的欧拉函数是$2^{18}$的倍数，因此可以用NTT代替FFT。

F. The Game
===========

G. odd-even number \[Constroy\]
===============================

H. oasis in desert \[Skywalkert\]
=================================

根据原图的最短路信息构建一个新图，原图中距离不超过$K$的点对均在新图中连边，新图可能是许多的连通块。

每个连通块不相关，可以直接考虑一个连通块的情况。假设有解，由于所选集合为最大独立点集，同时也是最小覆盖点集，则在集合中的点互相没有连边，不在集合中的点互相也没有连边，否则不满足最小覆盖的要求，因此这个图必须是二分图，所选点集为二分图的一侧点集。而一般连通图的最大独立点集大小加上最小覆盖点集大小等于顶点数，所以所选集合一定是一半的点，而二分图的最小覆盖点集大小等于最大匹配边集大小，所以这个二分图必须有完美匹配。

因此做法呼之欲出，对于每个连通块，检查是否是存在完美匹配的二分图，若是，则选出最小标号所在的一侧作为答案的集合。时间复杂度$O(n^3)$。

I. QSC and Master \[Constroy\]
==============================

J. Count primes \[Skywalkert\]
==============================

去年多校有一道类似的题目，定义$S(n, k)$表示前$n$个正整数里不被前$k$个质数整除的数字个数，$C(n)$表示不超过$n$的素数个数，则前$n$个正整数里的素数个数等于$S(n, C(\left\lfloor\sqrt{n}\right\rfloor))$。

注意到这里的定义使得我们只需要求出$O(\sqrt{n})$个$C(x)$，所以我们设置一个阈值$T$，满足$T = O(\sqrt{\max(n)})$，预处理不超过$T$的素数，以及对应的$C(x)$。

显而易见地，设第$n$个质数是$p(n)$，则$S(n, k) = S(n, k - 1) - S(\left\lfloor\frac{n}{p(k)}\right\rfloor, k - 1)$，注意到后者的第一维下降的很快。

加入一个剪枝，如果$C(\left\lfloor\sqrt{n}\right\rfloor) \leq k$，说明$S(n, k)$代表的便是1与不超过$n$的素数中不属于前$k$个素数的数字个数，当$n \leq T$时，可以用$C(n)$和$k$的关系直接得到答案。

还可以加入的一个剪枝是$k$较小的情况，例如$S(n, 0) = n, S(n, 1) = n - \left\lfloor\frac{n}{2}\right\rfloor, S(n, 2) = n - \left\lfloor\frac{n}{2}\right\rfloor - \left\lfloor\frac{n}{3}\right\rfloor + \left\lfloor\frac{n}{6}\right\rfloor$等等，可以根据实现的常数自行展开一部分表达式。

然后强行搜索就可以通过了。
