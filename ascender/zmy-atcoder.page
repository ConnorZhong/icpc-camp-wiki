### agc003\_f Fraction of Fractal

> 给一个 $W*H$ 分形图的基础模样，问迭代 $K$ 次以后有多少个连通块

首先有一个很重要的条件，题目里的图是连通的。我们考虑，如果这个图左右复制是连通的，并且上下复制是连通的，那么答案一定为
$1$。
否则，我们可以单独来考虑。不难发现两者是等价的，以左右为例。首先要算出，左右复制会有多少个边界的格子是对应相连的。假设这个数为
$a$ 。然后我们考虑这个基础图中有多少个连接左右的边。设这个基础图有 $m$
块，那么答案为 $m^{k-1}$ 减去连边的个数。 这个连边的方式有 $k-1$
种，每种有$m^ia^{k-1-i}$ 个。我们需要对其求和，这部分可以用 $k-1$
次方差公式来快速算出。

### agc006\_c Rabbit Exercise

> 有 $N$ 个兔子标号为 $1$ 到 $N$ ，每个兔子在数轴上的坐标为 $x_i$
> 。每一轮要进行 $M$ 个操作，每个操作给定一个数 $i (1<i<N)$
> ，你有等概率将 $i$ 的坐标变为与 $i+1$ 或 $i-1$
> 坐标的对称点。操作一共要进行 $K$ 轮，问最后每个兔子的坐标的期望值。

我们考虑一次变换后坐标的期望。假设我们要对 $x_i$
进行操作，不难发现变换一次后的期望坐标为 $x_{i-1}+x_{i+1}-x_i$
。因此我们可以想到，不需要考虑“概率”，直接进行坐标的线性变换即可。我们再发掘刚刚推出来的那个式子，可以发现，这个操作的实质是交换了
$x_i-x_{i-1}$ 和 $x_{i+1}-x_i$
。考虑一次交换的结果，实际上是对原数列的一阶差分结果，进行了置换。我们要求
$K$
次置换的结果，只需要把循环节找出来即可。然后再利用差分的值，恢复出答案序列。

### agc012\_d Colorful Balls

> 给定一列球，每个球两个参数，一个是颜色 $c_i$ ，一个是权值 $w_i$ ,
> 给定两个数 $X$ 和 $Y$ ，每次我们可以交换两个颜色相同且权值之和小于等于
> $X$ 的球，也可以交换两个颜色不同且权值之和小于等于 $Y$
> 的球。可以进行无限次交换操作。现在问能构造多少种球颜色不同的排列。

首先考虑交换的性质，我们把能直接交换的关系看做一条无向边。那么对于形成的这个图，一个连通块内的所有球，可以通过交换以任意一种排列方式出现。而不同的颜色排列数我们可以用组合数求出。现在问题主要在于求出每个连通块。首先我们考虑所有同一颜色的球，显然我们只需要用同一颜色中权值最小的那个，与其他的球建边。之后我们考虑不同颜色的球，我们选一个权值最小的球
$x$，然后遍历一遍所有的球，将颜色与其不同且权值和小于等于 $Y$
的所有球与其连边。但是这样会少考虑一种情况，我们需要在此基础上，选取与
$x$ 颜色不同的所有球中权值最小的求，与颜色和 $x$ 相同且权值之和小于等于
$Y$ 的球连边。用并查集维护连通性即可。

### arc063\_e Integers on a Tree

> 给定一棵树，以及树上一些点的值。问是否存在一种方案，给出剩余点的权值，使得任意两个相邻点的权值差恰好为
> $1$

我们维护一个优先队列，为权值的小根堆。初始时我们将所有已知点塞进去。然后不断取出队首，处理与其相邻的点。如果这个点已经被填过值了，那么必须恰好差值为
$1$ 才行。否则，我们填成当前点的值加 $1$
，这样一定是最优的，并且把这个点扔到优先队列里。

### agc010\_c Cleaning

> 给定一棵树，树上每个点有一个权值。每次你需要选两个叶子节点，然后将这两个点之间的路径上所有点（包括端点）的权值都
> $-1$ 。问是否有种操作方法使得最后所有点的权值都为 $0$

先特判掉 $n=2$ 的情况，之后我们必然能选一个度数不为 $1$ 的点进行 dfs
。我们将叶子的权值 $x$ 看做从这个叶子发出了 $x$
条路径。我们考虑对于每个点 $x$ ，有多少条路径未延伸到以 $x$
为根的子树外。设为 $f[x]$ 并设 $sz[x]$
为这个子树中所有叶子的权值和。那么对于一个点来说，当前有
$res=\sum sz[y]-f[y]$ 条路径延伸到了 $x$
的位置。我们需要判断哪些需要配对，哪些需要延伸的外面。设这个路径个数为
$delta$ ，显然 $res-delta=v[x]$
，首先我们要判断这个等式能否成立。之后我们要考虑能否配出 $delta$
对。最后我们再判断下 $sz[root]$ 是否等于 $f[root]$ 即可。

### agc013\_c Ants on a Circle

> 给定一个圆，圆上有一些蚂蚁，每个蚂蚁的速度都是 $1$
> ，现在给出每个蚂蚁的位置以及其初始的方向。每次两个蚂蚁相遇会改变自己的方向继续走。问
> $t$ 秒后每个蚂蚁的位置

链上的情况是很经典。相比之下，它的结论我们也可以用到圆中。但是我们得能确定一个蚂蚁的位置。我们转化下问题，考虑每个蚂蚁有一个标号，初始是自己的编号
$i$ 。运动过程中，每次在顺时针方向撞到一个蚂蚁，它的编号 $+1$
。在逆时针方向撞到一个蚂蚁，编号 $-1$
。每个时刻下，它的编号表示着它在最后排好序的位置中，应该处于第几个。所以我们算出其中一个蚂蚁的位置，并依次算出其他所有蚂蚁的位置。

### arc073\_e Ball Coloring

> 每个袋子里有两个球，权值分别为 $x_i$ 和 $y_i$ ，现有 $n$
> 个袋子，对于每个袋子我们要将一个球染为蓝色，一个染为红色。求
> $(R_{max}-R_{min})(B_{max}-B_{min})$ 的最小值

将所有权值排序，分两类情况：最小和最大为同一颜色，最小和最大为不同颜色来考虑即可。
