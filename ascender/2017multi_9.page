---
title: 2017 Multi-University Training Contest - Team 9
---

# A. Big binary tree [zmy]

每次修改一个点，修改其父亲所有节点的$mx[x]$值，即向下走的最大距离。查询时，我们考虑 dp 的过程，先计算两个子树的结果，然后再向上推，计算向上路径的最大长度。思路比较简单。但是代码技巧很多。

- 对于一个没有被更新过的节点$v$，假设其向左扩展的最大深度为$x$，向右扩展的最大深度为$y$。那么如果$x!=y$，则最长路径一定是$v -> n$，否则一定是$v$到向右扩展的最大位置。
- 只对询问的点存到 map 里，其他都用暴力求，实际上更快一些。
- 多用 map 的 count 函数
- 由于是二叉树，不用一般的树 dp 那样维护一个最大和次大，只用维护最大即可。找一条不过它的路径，用异或$1$的方式就可以了

# B. Ch’s gift [zmy]

首先将所有操作变成询问。对于点权，变成一个增加点权的操作。对于查询$[L,R]$，变成两个询问$[1,L-1]$和$[1,R]$。之后按照权值大小排序。求出树的dfs序，用树状数组维护点权。增加一个点的点权时，在$l[x]$位置增加$v_i$，在$r[x]$位置增加$-v_i$。对于$x->y$这条链上的答案，通过$sum(l[lca(x,y)],l[x])+sum(l[lca(x,y)],l[y])-sum(l[lca(x,y)])$得到。

# C. CSGO [wbr]

首先将所有线段的端点和所有的敌人按照询问点的极角排好序。因为线段不会相交所以用set维护线段离原点的先后顺序就可以了。注意精度。时间复杂度$O(TQN\lg N)$。

# D. Dying Light[wbr]

可以看出反射的次数非常少，因此可以暴力模拟。模拟的过程中要注意利用叉积判断在哪条边上。使用On_segment函数可能会导致精度不够。

# E. FFF at Valentine [zmy]

暴力求解每个点对是否能从一方到另一方。

# F. Senior Pan [zmy]

将$K$点都加入到优先队列里跑 dijkstra ，图中每个点只能被访问两次，每当一个关键点到另一个关键点时更新答案。

# G. Missile Interception [wbr]

二分答案。计算出答案时间时每个导弹的位置，然后就是一个裸圆交问题。

# H. Numbers [zmy]

用 map 维护已经构造出来的和。如果新的数不在这个 map 中，那么一定是$a$数列中的一个数，并且更新一边和。

# I. Senior PanⅡ[zmy]

如果$k$不为质数，那么答案一定是$0$。
否则，假设$k$是第$i$个质数，我们考虑$[1,x]$区间的答案。很容易发现，如果$k*k>x$的话，答案最多为$k$，只需要判断一下即可。否则，$k<\sqrt{10^{11}}$，我们可以预先筛出比它小的所有质数。接下来就是一个经典的问题，考虑$[1,x/k]$这个区间中被前$i-1$个质数筛去后剩余部分的和。用 dp 去做即可。

几个类似的题：

- [CodeForces 665F](http://codeforces.com/contest/665/problem/F)
- [Hdu 5877](http://acm.hdu.edu.cn/showproblem.php?pid=5877)

# J. Two strings [zmy]

dp。$f_{i,j,k}$表示匹配到$s_i,t_j$时的情况。如果$k$为$1$则表示当前的$*$没有跳过，如果$k$为$0$则表示跳过。


# 总结反思

###replay

开局zmy看到08是个水题，上去立马切了。wbr读了05 ，zmy觉得需要强连通分量缩点，jds 说直接暴力就行。但是zmy一开始没听懂jds的做法，和他讨论了半天，后来发现确实是个暴力题。上去写了下然后A了。然后看榜发现很多人过10，zmy想了下，觉得是个dp。就动手写了。然后jds出了几组数据，zmy被卡了一次。改掉后，交上去1A了。然后wbr觉得02是一个裸的树链剖分。zmy觉得这么早过的一定没有那么麻烦，然后和jds想了一会儿发现就是用树状数组维护下dfs序就行了。zmy写了下，调了一会儿然后1A了。然后wbr开始写04 。zmy和jds想06，wbr WA了一发04 。然后zmy想到了一个错误做法，上去写，然后WA了。发现是因为考虑自环的部分没处理好。但是这份代码bug重重，先是写错，再是发现算法有问题，再是写错。一共错了9回。zmy心态有点崩。最后在jds的帮助下总算过了此题。wbr也陷入WA的深渊，到最后都没通过。然后zmy动手写01，两个log的复杂度，T了3发，打出了GG。

**zmy** 中期心态一定要稳。下次求队友监督，不准让zmy看榜。WA一发以后要保持好心态，题目想清楚了再上去写，不要急于提交。第一次提交可以交的匆忙一些，之后的每一次提交都必须要谨慎。尤其是WA了两三次以后，一定要仔细推敲算法和代码写法。zmy这场背大锅，打五十大板。此外多打打CF，提高AC率。另外期待wbr能够在场上虐出中期计算几何题。

**jds** 依旧是前期超顺，后期血崩，可能也是前期的顺让我们无形中有着特别高的期望，而一旦出现了一点状况，再结合前面几场的发挥不佳，马上心态就有些慌了。所以后面我们队伍都得锻炼自己的心理素质，然后便是训练思维量、代码量偏大的题目，一定要止住现在的颓势。当然比赛的时候还是不要想这么多，将暂时的排名无论好坏都看淡，发挥出自己的全部水平就好了。

**wbr** 本场计算几何超级多，本来挑了一道看起来最水的写，结果自己姿势不过关精度不够。还要努力练习计算几何，争取达到轻松1A的程度。