Info
====

Date:2018.05.12

[Link](http://codeforces.com/gym/101755)

Solutions
=========

A Restoring Numbers
-------------------

solved by sk

------------------------------------------------------------------------

sk's solution

$a+b=s$，$gcd(a,b)=g$，所以要把$\frac{s}{g}$分成两个互质的正整数，分成$1$和$\frac{s}{g}-1$即可。

无解情况是$s%g!=0$或$s=g$。

B Minimal Area
--------------

solved by sk

------------------------------------------------------------------------

sk's solution

只需要枚举凸包上相邻三个点构成的三角形面积，证明很简单。

C Third-Party Software
----------------------

solved by sk

------------------------------------------------------------------------

sk's solution

经典的贪心。区间按右端点排序，每次靠右放。

D Transfer Window
-----------------

unsolved

E Substring Reverse
-------------------

solved by sk

------------------------------------------------------------------------

sk's solution

找第一个和最后一个字母不一样的位置，检查是不是翻转的这段区间。

F Tree Restoration
------------------

solved by ghc

------------------------------------------------------------------------

ghc's solution

从叶子开始做拓扑排序，认为每次拿掉的点的父亲是它的祖先中孩子最少的那个。如果数据给的是一棵树，这样就做完了。否则，需要判连通性、判环等等，用邻接表判一判就好。

G Underpalindromity
-------------------

solved by sk

------------------------------------------------------------------------

sk's solution

从小到大统计每个点的贡献，并往树状数组中插入，根据位置分奇偶统计。

~~赛中神tm想了个滑窗+平衡树维护，没法写啊~~

H Safe Path
-----------

solved by sk

------------------------------------------------------------------------

sk's solution

先从monster位置做多源的bfs，再从起点bfs避开会被吃掉的位置。

I Guess the Tree
----------------

upsolved by ghc

------------------------------------------------------------------------

ghc's solution

1.  随机两个点，使得这两个点的距离等于树的直径，那么这两个点就是两个叶子节点，且分别在左子树和右子树。由于随机成功的概率为$1/8$，这一步的询问数期望是8.

2.  询问剩余$n-2$个点到这两个叶节点的距离，到这两个点距离相等的点即为根，找到就break，这一步的询问数最多是$2(n-2)$.

3.  询问每个点到根节点的距离，可知每个点的深度，这一步的询问数是$n-3$（第1步的两个叶节点不用询问）.

4.  按深度由浅到深，确定每个节点的父亲。对于某一节点，根一定是它的祖先，此时通过比较根的两个儿子到这个节点的距离，可知这两个儿子哪一个是它的祖先，然后重复这一过程，即可找到该节点的父亲。这一步，深度为dep\$的节点（认为根的深度是0）需要的询问次数是$2*(dep-1)$，所以这一步总的询问次数是$\sum_{dep=2}^{h-1}(dep-1)*2^{dep+1}=(h-3)2^{h+1}+8$.

总的操作数约等于$(2*h-3)n+2*h+3$.

询问结果用邻接表存储，避免重复询问。

  h    $(2h-3)n+2h+3$   $\lfloor2.5hn\rfloor$
  ---- ---------------- -----------------------
  1    4                2
  2    10               15
  3    30               52
  4    86               150
  5    230              387
  6    582              945
  7    1414             2222
  8    3334             5100
  9    7686             11497
  10   17414            25575

$h=1$时直接特判，直接输出即可。其他情况询问次数还是很充足的，$h=2$时不加特判也过了。

J Parallelograms
----------------

solved by sk

------------------------------------------------------------------------

sk's solution

签到题，因为平行四边形对边相等，所以数一共有几对数，最后整除2就行了。

K Video Reviews
---------------

solved by sk

------------------------------------------------------------------------

sk's solution

用线段树维护最小值，每次找最左边第一个还没被选的位置，强制选上，答案加一，然后区间修改，将右边所有数减一，再单点修改，将该位置删除（置为INF），用线段树上二分找到当前位置右侧第一个值小于等于0的位置，连环做下去，直到数量至少为m。

L Queries on a String
---------------------

solved by sk

------------------------------------------------------------------------

sk's solution

预处理$next[i][j]$，表示i位置右侧出现的第一个j字符的位置。对于询问，用一个栈模拟一下即可。

M Forgotten Spell
-----------------

solved by ghc

给3个长为$n$、由小写字母组成的串，求一个同样长度的串，与每个串不同的位置不超过一个。多解输出Ambiguous，无解输出Impossible。把所有三个串不全相同的位置找出来，爆搜，然后WA了。发现可能在三个串都相同的位置出现多解的情况，于是从三个串都相同的位置中随便拿一个一起爆搜，然后就过了。

Replay
======

ghc
---

输出还是太低啊。。肝肝肝

gjy
---

sk
--

上来E题少判了一半，wa了一发(开始发现事情有点不对劲)

B题写完之后纳闷为什么比样例少一点点，我的输出末尾全是0，然后看了半天，发现我对一个long
long用了fab！

然后就是K题卡了一个多小时，数据范围开小了，算法有bug，最后查询的区间和当前线段树区间弄混了，各种错误，快报警了！！

~~感觉老年选手码不动了啊QAQ~~
