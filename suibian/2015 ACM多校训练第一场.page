2015 ACM多校训练第一场
======================

总结
====

感觉上来说这场比赛做的不错的样子，除了前期智障错误……

[训练地址](http://acm.hust.edu.cn/vjudge/contest/view.action?cid=108976#problem/F)

题解
====

A.OO’s Sequence
---------------

题意

f(l,r)表示\[l,r\]区间中有多少个i满足在这个区间中找不到其他j使得ai%aj=0

然后让你输出所有f(l,r)的累加。

题解：

对于每一个位置，我算贡献就好了。

直接暴力分解a\[i\]就好了。

复杂度nsqrtn的。

[代码](http://www.cnblogs.com/qscqesze/p/5269559.html)

B.Assignment
------------

题意

给你n个数，然后连续的，且这个区间内最大值减去最小值的差小于k的话，就可以算作一队。

问你一共有多少种分队的方法。

题解：

暴力枚举左端点位置，然后二分枚举右端点，用一个rmq维护一下就好了。

[代码](http://www.cnblogs.com/qscqesze/p/5269577.html)

D.Candy Distribution
--------------------

题意

有n种糖果，每种糖果ai个，然后你要把糖果分给A,B两个人，问你使得两个人糖果个数都相同的方案有多少种。

题解：

最简单的dp：

dp\[i\]\[j\]表示考虑到第i种糖果，现在A比B多j个，那么dp\[i\]\[x-y+j\]+=dp\[i-1\]\[j\]，如果x+y&lt;=ai的话

当然这种dp肯定会tle的。

然后优化一下，发现dp\[i\]\[j\]=dp\[i\]\[j-k\]\*((a\[i\]-k)/2+1)，表示你先扔了K个给A，然后剩下的水果AB平分。

这个东西我们发现，是一个分奇数和偶数的等差数列的东西。

1 1 2 2 3 3 4 4 ..... n n n n-1 n-1 ..... 3 3 2 2 1 1 系数是这样的。

显然可以分奇偶前缀和+差分+递推就可以O(1)得到每一个dp\[i\]\[j\]了。

然后这道题就可以搞了。

[代码](http://www.cnblogs.com/qscqesze/p/5277381.html)

F.Annoying problem
------------------

题意

给你一棵树，树上有n个点。

然后给你m条链，然后让你选择一些不相交的链，使得权值和最大。（每条链都有权值）

题解：

树形dp+dfs序+树状数组

首先想到的一点用dp\[i\]表示以i为根的子树最大值。

所给你的链只用考虑在lca这个点拿。

一个辅助数组sum\[i\]表示i点儿子的所有dp值的和。

然后dp方程就很显然了:

1.如果i点不拿任何链，那么dp\[i\]=sum\[i\]

2.如果i点拿了一条链，那么dp\[i\]=sum\[i\]+dp\[v\]+w，dp\[v\]是以那条链中的某个节点为父亲的点的dp值。

比较显然的发现dp\[v\] = sum\[k\] - dp\[k\]，k即为那条链上的点。

然后这个东西按照dfs序去维护一个树状数组就好了。

[代码](http://www.cnblogs.com/qscqesze/p/5273104.html)

G.Tricks Device
---------------

题意

给一个无向图，然后问你最少删除多少个边使得最短路改变。

最多删除多少条边使得最短路仍然不变。

题解：

第一个问题，我们把所有最短路的边扔去跑最小割就好了。

第二个问题，跑一个dij然后除了最短的那条最短路以外，其他的边都删除就好了。

[代码](http://www.cnblogs.com/qscqesze/p/5269586.html)

H.Unstable
----------

题意

平面上有四个点A,B,C,D

然后告诉你AB,BC,CD,DA长度，然后E是AB中点，F是CD中点，EF的长度你也知道。

现在你需要构造一组解，使得满足要求。

题解：

随便画个四边形，然后延长AF到A‘，使得A’F=AF，做AB的平行线DG，使得DG=AB。

然后连接A'C,A'B,A'G,CG

显然的发现三角形DFA全等于三角形FCA'，三角形AFE相似于三角形ABA'

然后A‘就是以C点为圆心，AC为半径和B点为圆心，BA'为半径的圆相交的交点。

知道A’之后，G点可以由CA'+CB得到。

然后D点坐标就是以G为圆心，AB为半径，C为圆心，CD为半径的交点。

然后A点就瞎搞就好了。

然后就完了。

[代码](http://www.cnblogs.com/qscqesze/p/5280711.html)

I.Annoying problem
------------------

题意

给一棵树，和一个集合S，每次操作会动态的往集合里面加一个点或者删除一个点，每次操作后输出让集合S中的点两两联通的最小边权代价.

不妨有集合内的点为a1,a2,a3,a4.....an,且按照DFS序排好

那么答案就是 ( Distance(a1,a2) + Distance(a2,a3) ..... + Distance( an
,a1 ) ) / 2

用set动态维护一下就好了

J.Y sequence
------------

题意

有一个序列，一开始是1,2,3,4,5,....,inf 这样的。

然后这个序列把a\^b(1&lt;b&lt;=r)都删除掉了。

现在给你n,r。

问你这个序列的第n项是什么。

题解：

假设我们知道了cal(x)表示包括x在内的x之前这个序列有多少个数。

那么显然我们就可以直接二分乱搞就好了。

然后cal怎么做呢？

x\^(1/b) 就表示x范围内有多少个 a\^b
次方的数，然后根据这个容斥一波就好了。

比如你减去了2次方的，减去了3次方的，但是你多减了6次方的，你得加回去。

然后你就做完了。

还有一个问题就是二分会TLE，所以你就只能换成迭代做了……

[代码](http://www.cnblogs.com/qscqesze/p/5274794.html)

L.Circles Game
--------------

题意

有一个平面，平面上有n个圆，圆与圆之间只有相离和包含的关系。

然后他们开始跑博弈论。

每个人可以拿圆和他所包含的圆。

如果谁不能拿了的话，那就输了。

问你谁能赢。

题解：

很显然，包含和相离关系，那么就是一个森林之间的关系。

然后把这个森林需要建立出来，这个就直接暴力就好了。

然后后面的博弈是一个很经典的东西。

叶子节点的SG值为0；中间节点的SG值为它的所有子节点的SG值加1 后的异或和。

然后直接跑就好了。

[代码](http://www.cnblogs.com/qscqesze/p/5269603.html)
