[链接](http://codeforces.com/contest/704/problem/B)

给定N个位置XI 从I跳到J 需要的代价为

I&gt;J X\[I\]-X\[J\]+C\[I\]+B\[J\]

I&lt;J X\[J\]-X\[I\]+A\[J\]+D\[I\]

求从s出发 每个点走且仅走一次 到达t的最小代价

设out\_r\[i\]表示i向右跳的代价 out\_l\[i\]表示向左跳的代价

in\_r\[i\]表示i是从右边的点跳过来 in\_l\[i\]表示从左边跳过来

out\_r\[i\]=-x\[i\]+d\[i\] 以此类推

考虑DP\[i\]\[j\]表示前i个点 还有j个左右都可以连点的链

不妨假设s&lt;t

那么根据i点的位置考虑转移

如果i是s 那么向左跳的话f\[i\]\[j\]=f\[i-1\]\[j+1\]+out\_r\[i\]
（即为堵死了一个可以左右都可以连的链 多了一个可以单向接的链）

             向右跳的话f[i][j]=f[i-1][j]+out_l[i] （还有j个 但是多了一个可以单向接的链）

如果i是t 那么从左边跳过来的话f\[i\]\[j\]=f\[i-1\]\[j\]+in\_l\[i\]
（即为堵死了一个可以左右都连的链 但是又多了一个单向接的链
和前面那个可以看成多了一个变成j个）

             从右边跳过来的话f[i][j]=f[i-1][j-1]+in_r[i] （还有j-1个 但是又多了一个单向接的 和前面那个可以看成多了一个变成j个）

否则 按照这个点进和出四种情况转移一下就可以了
